---
number: 3
title: "Network Troubleshooting & Analysis"
slug: "network-troubleshooting-analysis"
level: "advanced"
tags: ["networking", "troubleshooting", "analysis", "wireshark", "debugging"]
prerequisites: ["network-performance-optimization"]
estimated_minutes: 140
contributors: []
diagrams: []
examples: []
canonical_id: "cs-net-adv-03"
---

# Network Troubleshooting & Analysis

## Overview

Network troubleshooting and analysis involves diagnosing network problems, analyzing traffic, and understanding network behavior. Understanding troubleshooting methodologies, packet analysis tools like Wireshark, network monitoring, and diagnostic techniques is essential for maintaining reliable networks.

## Table of Contents

1. [Troubleshooting Methodology](#methodology)
2. [Network Diagnostic Tools](#tools)
3. [Packet Analysis with Wireshark](#wireshark)
4. [Protocol Analysis](#protocol-analysis)
5. [Performance Analysis](#performance-analysis)
6. [Network Monitoring](#monitoring)
7. [Common Issues](#common-issues)
8. [Best Practices](#best-practices)

## Troubleshooting Methodology

### Systematic Approach

**1. Define Problem**:
```
What is the problem?
Symptoms, scope
```

**2. Gather Information**:
```
Collect logs, metrics
```

**3. Hypothesize**:
```
Form hypotheses
```

**4. Test**:
```
Test hypotheses
```

**5. Resolve**:
```
Fix problem
```

**6. Verify**:
```
Verify fix
```

### OSI Model Approach

**Layer-by-Layer**:
```
1. Physical layer
2. Data link layer
3. Network layer
4. Transport layer
5. Application layer
```

**Method**: Check each layer

## Network Diagnostic Tools

### Basic Tools

**1. ping**:
```
Test connectivity
Measure RTT
```

**2. traceroute**:
```
Trace path to destination
```

**3. netstat**:
```
Show network connections
```

**4. ss**:
```
Modern netstat replacement
```

**5. tcpdump**:
```
Capture packets
```

### Advanced Tools

**1. Wireshark**:
```
Packet analyzer
GUI and CLI
```

**2. tshark**:
```
CLI version of Wireshark
```

**3. nmap**:
```
Network scanner
```

**4. iperf**:
```
Bandwidth testing
```

**5. mtr**:
```
Combined ping/traceroute
```

## Packet Analysis with Wireshark

### Wireshark Basics

**Wireshark**: Packet analyzer

**Features**:
- **Capture**: Capture packets
- **Filter**: Filter packets
- **Analyze**: Analyze protocols
- **Decode**: Decode protocols

**Use**: Troubleshoot network issues

### Wireshark Filters

**Display Filters**:
```
ip.addr == 192.168.1.1
tcp.port == 80
http.request
tcp.flags.syn == 1
```

**Capture Filters**:
```
host 192.168.1.1
port 80
tcp port 80
```

### Wireshark Analysis

**1. Follow Streams**:
```
Follow TCP/UDP streams
```

**2. Expert Info**:
```
Expert analysis
Warnings, errors
```

**3. Statistics**:
```
Protocol statistics
Conversations
```

**4. IO Graphs**:
```
Visualize traffic
```

## Protocol Analysis

### TCP Analysis

**TCP Issues**:
- **Retransmissions**: Packet loss
- **Out-of-Order**: Reordering
- **Duplicate ACKs**: Loss indication
- **Window Issues**: Flow control

**Analysis**: Identify issues in Wireshark

### HTTP Analysis

**HTTP Issues**:
- **Slow Requests**: High latency
- **Errors**: 4xx, 5xx errors
- **Redirects**: Multiple redirects
- **Large Responses**: Large payloads

**Analysis**: Analyze HTTP traffic

### DNS Analysis

**DNS Issues**:
- **Slow Resolution**: High latency
- **NXDOMAIN**: Non-existent domains
- **Timeouts**: No response

**Analysis**: Analyze DNS queries

## Performance Analysis

### Latency Analysis

**Measure Latency**:
```
RTT measurements
Identify high latency
```

**Sources**:
- **Network**: Propagation delay
- **Processing**: Processing delay
- **Queuing**: Queuing delay

**Analysis**: Identify sources

### Throughput Analysis

**Measure Throughput**:
```
Bandwidth testing
iperf, speedtest
```

**Bottlenecks**:
- **Link**: Link capacity
- **Device**: Device capacity
- **Application**: Application limits

**Analysis**: Identify bottlenecks

## Network Monitoring

### Monitoring Tools

**1. SNMP**:
```
Simple Network Management Protocol
```

**2. NetFlow**:
```
Traffic flow analysis
```

**3. sFlow**:
```
Sampled flow analysis
```

**4. Prometheus**:
```
Metrics collection
```

**5. Grafana**:
```
Visualization
```

### Monitoring Metrics

**1. Availability**:
```
Uptime, downtime
```

**2. Performance**:
```
Latency, throughput
```

**3. Errors**:
```
Error rates
```

**4. Utilization**:
```
Bandwidth utilization
```

## Common Issues

### Issue 1: Connectivity Problems

**Symptoms**: Cannot reach destination

**Causes**:
- **Routing**: Routing issues
- **Firewall**: Blocked traffic
- **DNS**: DNS resolution failure

**Diagnosis**: ping, traceroute, DNS lookup

### Issue 2: Performance Problems

**Symptoms**: Slow performance

**Causes**:
- **Latency**: High latency
- **Bandwidth**: Insufficient bandwidth
- **Congestion**: Network congestion

**Diagnosis**: Latency tests, bandwidth tests

### Issue 3: Packet Loss

**Symptoms**: Lost packets

**Causes**:
- **Link**: Bad link
- **Congestion**: Buffer overflow
- **Errors**: Transmission errors

**Diagnosis**: ping, packet capture

## Best Practices

### Practice 1: Document

**Document**:
```
Network topology
Configurations
Changes
```

**Benefit**: Easier troubleshooting

### Practice 2: Baseline

**Baseline**:
```
Normal performance
Normal behavior
```

**Benefit**: Identify anomalies

### Practice 3: Monitor

**Monitor**:
```
Continuous monitoring
Alert on anomalies
```

**Benefit**: Early detection

### Practice 4: Test Changes

**Test**:
```
Test changes
Verify impact
```

**Benefit**: Avoid problems

## Real-World Examples

### Example 1: Slow Web Page

**Problem**: Slow web page loading

**Analysis**:
1. Check DNS resolution
2. Check TCP connection
3. Check HTTP requests
4. Identify slow requests

**Solution**: Optimize slow requests

### Example 2: Intermittent Connectivity

**Problem**: Intermittent connectivity

**Analysis**:
1. Check packet loss
2. Check routing
3. Check link errors
4. Identify pattern

**Solution**: Fix underlying issue

## Common Pitfalls

### Problem: Jumping to Conclusions

```c
// BAD: Assume cause
// May fix wrong thing

// GOOD: Systematic approach
// Gather data, analyze
```

### Problem: Not Documenting

```c
// BAD: No documentation
// Hard to troubleshoot

// GOOD: Document everything
// Topology, configs, changes
```

## Quiz

1. What is Wireshark?
   - **A)** Network scanner
   - **B)** Packet analyzer for capturing and analyzing network traffic
   - **C)** Network monitor
   - **D)** Network tester

2. What is the OSI model approach to troubleshooting?
   - **A)** Top-down approach
   - **B)** Layer-by-layer approach checking each OSI layer
   - **C)** Bottom-up approach
   - **D)** Random approach

3. What is packet loss?
   - **A)** Slow packets
   - **B)** Packets that don't reach destination
   - **C)** Fast packets
   - **D)** Large packets

**Answers:**
1. **B** - Wireshark is a packet analyzer that captures network packets and provides tools to filter, analyze, and decode network protocols for troubleshooting
2. **B** - The OSI model approach systematically checks each layer (physical, data link, network, transport, application) to isolate problems
3. **B** - Packet loss occurs when packets are dropped and don't reach their destination, often due to network congestion, link errors, or buffer overflows

## Next Steps

- [Advanced Network Architectures](../networking/04.%20Advanced%20Network%20Architectures.md) - Architecture design
- [Network Security Advanced](../networking/05.%20Network%20Security%20Advanced.md) - Security

