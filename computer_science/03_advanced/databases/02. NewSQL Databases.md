---
number: 2
title: "NewSQL Databases"
slug: "newsql-databases"
level: "advanced"
tags: ["databases", "newsql", "distributed", "acid", "scalability"]
prerequisites: ["distributed-database-systems"]
estimated_minutes: 140
contributors: []
diagrams: []
examples: []
canonical_id: "cs-db-adv-02"
---

# NewSQL Databases

## Overview

NewSQL databases combine the scalability of NoSQL with the ACID guarantees of traditional SQL databases. Understanding NewSQL architectures, distributed SQL, Spanner, CockroachDB, and how they achieve scalability with consistency is essential for modern distributed database systems.

## Table of Contents

1. [What is NewSQL?](#what-is-newsql)
2. [NewSQL vs Traditional SQL](#newsql-vs-sql)
3. [NewSQL vs NoSQL](#newsql-vs-nosql)
4. [NewSQL Architectures](#architectures)
5. [Google Spanner](#spanner)
6. [CockroachDB](#cockroachdb)
7. [Distributed SQL](#distributed-sql)
8. [Use Cases](#use-cases)

## What is NewSQL?

### Definition

**NewSQL**: Scalable SQL databases

**Goal**: 
- **ACID**: ACID guarantees
- **Scalability**: Horizontal scalability
- **SQL**: SQL interface
- **Performance**: High performance

**Examples**: Google Spanner, CockroachDB, TiDB, VoltDB

### NewSQL Characteristics

**1. ACID Compliance**:
```
Full ACID guarantees
```

**2. SQL Interface**:
```
Standard SQL interface
```

**3. Horizontal Scalability**:
```
Scale across nodes
```

**4. Distributed**:
```
Distributed architecture
```

**5. High Performance**:
```
High performance
```

## NewSQL vs Traditional SQL

### Traditional SQL Limitations

**1. Vertical Scaling**:
```
Scale up (bigger hardware)
```

**2. Single Node**:
```
Single node limitations
```

**3. Replication**:
```
Master-slave replication
```

**4. Limited Scalability**:
```
Limited horizontal scalability
```

### NewSQL Advantages

**1. Horizontal Scaling**:
```
Scale out (more nodes)
```

**2. Distributed**:
```
Distributed architecture
```

**3. Multi-Master**:
```
Multi-master replication
```

**4. High Scalability**:
```
High horizontal scalability
```

## NewSQL vs NoSQL

### NoSQL Characteristics

**1. Scalability**:
```
High scalability
```

**2. Flexibility**:
```
Schema flexibility
```

**3. Performance**:
```
High performance
```

**4. Consistency**:
```
Eventual consistency
```

### NewSQL Advantages

**1. ACID**:
```
ACID guarantees
```

**2. SQL**:
```
SQL interface
```

**3. Consistency**:
```
Strong consistency
```

**4. Scalability**:
```
High scalability
```

## NewSQL Architectures

### Architecture Types

**1. Shared-Nothing**:
```
No shared storage
```

**2. Shared-Disk**:
```
Shared storage
```

**3. Shared-Memory**:
```
Shared memory
```

### Shared-Nothing Architecture

**Shared-Nothing**: 
- **Storage**: Local storage per node
- **Processing**: Local processing
- **Network**: Communication over network

**Benefit**: High scalability

**Use**: Most NewSQL databases

## Google Spanner

### What is Spanner?

**Spanner**: Google's distributed database

**Features**: 
- **Global Distribution**: Global distribution
- **Strong Consistency**: Strong consistency
- **ACID**: Full ACID
- **SQL**: SQL interface
- **TrueTime**: TrueTime for ordering

**Use**: Global applications

### Spanner Architecture

**Components**:
- **Spanserver**: Data servers
- **Universe Master**: Metadata
- **Placement Driver**: Data placement
- **TrueTime**: Global time

**Distribution**: Global distribution

**Consistency**: Strong consistency

### TrueTime

**TrueTime**: Global time API

**Purpose**: 
- **Ordering**: Order events globally
- **Consistency**: Ensure consistency

**Method**: 
```
TT.now() returns [earliest, latest]
```

**Use**: External consistency

## CockroachDB

### What is CockroachDB?

**CockroachDB**: Distributed SQL database

**Features**: 
- **ACID**: Full ACID
- **SQL**: PostgreSQL-compatible SQL
- **Horizontal Scaling**: Horizontal scaling
- **Multi-Region**: Multi-region support
- **Consistency**: Strong consistency

**Use**: Distributed applications

### CockroachDB Architecture

**Components**:
- **Nodes**: Database nodes
- **Ranges**: Data ranges
- **Replication**: Replication
- **Consensus**: Raft consensus

**Distribution**: Automatic distribution

**Consistency**: Strong consistency

## Distributed SQL

### What is Distributed SQL?

**Distributed SQL**: SQL across distributed nodes

**Features**: 
- **Transparency**: Location transparency
- **ACID**: Distributed ACID
- **SQL**: Standard SQL
- **Scalability**: Horizontal scalability

**Challenges**: 
- **Distributed Transactions**: Distributed transactions
- **Consistency**: Consistency across nodes
- **Query Planning**: Distributed query planning

### Distributed SQL Execution

**Query Planning**: 
```
Plan distributed query
```

**Execution**: 
```
Execute across nodes
```

**Coordination**: 
```
Coordinate execution
```

**Result**: 
```
Combine results
```

## Use Cases

### Use Case 1: Global Applications

**Use**: Global applications

**Requirements**: 
- **Global Distribution**: Global distribution
- **Consistency**: Strong consistency
- **Performance**: Low latency

**Solution**: Spanner, CockroachDB

### Use Case 2: High-Scale Applications

**Use**: High-scale applications

**Requirements**: 
- **Scalability**: High scalability
- **ACID**: ACID guarantees
- **SQL**: SQL interface

**Solution**: NewSQL databases

### Use Case 3: Multi-Region Applications

**Use**: Multi-region applications

**Requirements**: 
- **Multi-Region**: Multi-region support
- **Consistency**: Strong consistency
- **Performance**: Low latency

**Solution**: Spanner, CockroachDB

## Real-World Examples

### Example 1: Google Spanner

**Use**: Google's internal systems

**Features**: 
- **Global**: Global distribution
- **Consistent**: Strong consistency
- **Scalable**: Highly scalable

**Impact**: Global database infrastructure

### Example 2: CockroachDB

**Use**: Distributed applications

**Features**: 
- **ACID**: Full ACID
- **SQL**: PostgreSQL-compatible
- **Scalable**: Horizontally scalable

**Impact**: Distributed SQL database

## Common Pitfalls

### Problem: Over-Engineering

```c
// BAD: Use NewSQL when not needed
// Unnecessary complexity

// GOOD: Use when need scalability + ACID
// Evaluate requirements
```

### Problem: Ignoring Trade-offs

```c
// BAD: Ignore trade-offs
// May have issues

// GOOD: Understand trade-offs
// Choose appropriately
```

## Quiz

1. What is NewSQL?
   - **A)** Old SQL
   - **B)** Scalable SQL databases combining ACID guarantees with horizontal scalability
   - **C)** NoSQL database
   - **D)** Traditional SQL

2. What is Spanner?
   - **A)** Google's distributed database with global distribution and strong consistency
   - **B)** Database tool
   - **C)** Query language
   - **D)** Index type

3. What is TrueTime?
   - **A)** Local time
   - **B)** Google's global time API for ordering events globally
   - **C)** Database time
   - **D)** Query time

**Answers:**
1. **B** - NewSQL databases combine the ACID guarantees and SQL interface of traditional databases with the horizontal scalability of NoSQL
2. **A** - Spanner is Google's globally distributed database providing strong consistency, ACID guarantees, and SQL interface using TrueTime
3. **B** - TrueTime is Google's API providing globally synchronized time with bounded uncertainty, enabling external consistency in Spanner

## Next Steps

- [Time-Series Databases](../databases/03.%20Time-Series%20Databases.md) - Time-series
- [Graph Databases](../databases/04.%20Graph%20Databases.md) - Graph databases

