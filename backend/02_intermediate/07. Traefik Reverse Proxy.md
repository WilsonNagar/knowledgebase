---
number: 7
title: "Traefik Reverse Proxy"
slug: "traefik-reverse-proxy"
level: "intermediate"
tags: ["backend", "traefik", "reverse-proxy", "load-balancer", "microservices"]
prerequisites: ["nginx-web-server-configuration"]
estimated_minutes: 105
contributors: []
diagrams: []
examples: []
canonical_id: "backend-intermediate-07"
---

# Traefik Reverse Proxy

## Overview

Traefik is a modern reverse proxy and load balancer designed for microservices. This guide covers Traefik configuration, automatic service discovery, dynamic routing, SSL/TLS management, load balancing, and integration with Docker and Kubernetes.

## Deep Explanation

### Key Features

**Automatic Discovery**: Detects services automatically
**Dynamic Configuration**: No restarts needed
**Let's Encrypt**: Automatic SSL certificates
**Multiple Backends**: Docker, Kubernetes, Consul, etc.

### Configuration

**Static Configuration** (traefik.yml):
```yaml
api:
  dashboard: true
  insecure: true

entryPoints:
  web:
    address: ":80"
  websecure:
    address: ":443"

providers:
  docker:
    endpoint: "unix:///var/run/docker.sock"
    exposedByDefault: false
```

**Dynamic Configuration** (Labels):
```yaml
labels:
  - "traefik.enable=true"
  - "traefik.http.routers.api.rule=Host(`api.example.com`)"
  - "traefik.http.routers.api.entrypoints=websecure"
  - "traefik.http.routers.api.tls.certresolver=letsencrypt"
  - "traefik.http.services.api.loadbalancer.server.port=8080"
```

### Routing Rules

**Host-based**:
```yaml
traefik.http.routers.api.rule=Host(`api.example.com`)
```

**Path-based**:
```yaml
traefik.http.routers.api.rule=PathPrefix(`/api`)
```

**Header-based**:
```yaml
traefik.http.routers.api.rule=Headers(`X-API-Key`, `secret`)
```

## Real Code Examples

### Example: Docker Compose with Traefik

```yaml
version: '3.8'

services:
  traefik:
    image: traefik:v2.10
    command:
      - "--api.insecure=true"
      - "--providers.docker=true"
      - "--entrypoints.web.address=:80"
      - "--certificatesresolvers.letsencrypt.acme.tlschallenge=true"
      - "--certificatesresolvers.letsencrypt.acme.email=admin@example.com"
    ports:
      - "80:80"
      - "443:443"
      - "8080:8080"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  api:
    image: myapi:latest
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.api.rule=Host(`api.example.com`)"
      - "traefik.http.routers.api.entrypoints=websecure"
      - "traefik.http.routers.api.tls.certresolver=letsencrypt"
      - "traefik.http.services.api.loadbalancer.server.port=8080"
```

## Hard Use-Case: Multi-Service Routing

### Problem Statement

Configure Traefik to route multiple microservices with different paths and SSL certificates.

### Solution

```yaml
services:
  api-service:
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.api.rule=Host(`api.example.com`)"
      - "traefik.http.routers.api.entrypoints=websecure"
      - "traefik.http.routers.api.tls.certresolver=letsencrypt"
      - "traefik.http.services.api.loadbalancer.server.port=8080"
  
  web-service:
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.web.rule=Host(`www.example.com`)"
      - "traefik.http.routers.web.entrypoints=websecure"
      - "traefik.http.routers.web.tls.certresolver=letsencrypt"
      - "traefik.http.services.web.loadbalancer.server.port=3000"
  
  admin-service:
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.admin.rule=Host(`admin.example.com`) && PathPrefix(`/admin`)"
      - "traefik.http.routers.admin.middlewares=auth"
      - "traefik.http.middlewares.auth.basicauth.users=admin:$$apr1$$..."
```

## Edge Cases and Pitfalls

### Common Mistakes

1. **Not Enabling Services**
   - Set `traefik.enable=true`
   - Check exposedByDefault setting

2. **Wrong Port Configuration**
   - Verify service ports
   - Check loadbalancer.server.port

3. **SSL Certificate Issues**
   - Configure ACME resolver
   - Check DNS resolution

## References and Further Reading

- Traefik Official Documentation
- Traefik Docker Provider Guide

## Quiz

### Question 1
What is Traefik's main advantage over traditional reverse proxies?

**A)** Better performance  
**B)** Automatic service discovery and dynamic configuration  
**C)** Lower memory usage  
**D)** Simpler configuration

**Answer: B** - Traefik automatically discovers services and updates configuration dynamically.

## Related Topics

- [Nginx Web Server Configuration](./05.%20Nginx%20Web%20Server%20Configuration.md)
- [Microservices Architecture](../03_advanced/03.%20Microservices%20Architecture.md)

