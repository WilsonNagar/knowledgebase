---
number: 13
title: "CircleCI Continuous Integration"
slug: "circleci-continuous-integration"
level: "intermediate"
tags: ["backend", "circleci", "ci-cd", "continuous-integration", "devops"]
prerequisites: ["api-design-principles"]
estimated_minutes: 100
contributors: []
diagrams: []
examples: []
canonical_id: "backend-intermediate-13"
---

# CircleCI Continuous Integration

## Overview

CircleCI is a CI/CD platform for automating software development workflows. This guide covers CircleCI configuration, workflows, jobs, orbs, caching, parallelism, and building efficient CI/CD pipelines for backend services.

## Deep Explanation

### Configuration File

**.circleci/config.yml**:
```yaml
version: 2.1

jobs:
  build:
    docker:
      - image: circleci/node:14
    steps:
      - checkout
      - run: npm install
      - run: npm test

workflows:
  version: 2
  build-and-test:
    jobs:
      - build
```

### Workflows

**Sequential**: Jobs run one after another
**Parallel**: Jobs run simultaneously
**Conditional**: Jobs run based on conditions

### Caching

**Dependencies**: Cache npm/pip packages
**Build Artifacts**: Cache build outputs
**Benefits**: Faster builds

## Real Code Examples

### Example: Multi-Stage Pipeline

```yaml
version: 2.1

jobs:
  test:
    docker:
      - image: circleci/python:3.9
    steps:
      - checkout
      - restore_cache:
          keys:
            - v1-deps-{{ checksum "requirements.txt" }}
      - run:
          name: Install dependencies
          command: pip install -r requirements.txt
      - save_cache:
          paths:
            - venv
          key: v1-deps-{{ checksum "requirements.txt" }}
      - run:
          name: Run tests
          command: pytest
  
  deploy:
    docker:
      - image: circleci/python:3.9
    steps:
      - checkout
      - run:
          name: Deploy
          command: ./deploy.sh

workflows:
  version: 2
  test-and-deploy:
    jobs:
      - test
      - deploy:
          requires:
            - test
          filters:
            branches:
              only: main
```

## Hard Use-Case: Multi-Environment Deployment

### Problem Statement

Set up CI/CD pipeline that tests, builds, and deploys to staging and production.

### Solution

```yaml
workflows:
  version: 2
  deploy:
    jobs:
      - test
      - build:
          requires:
            - test
      - deploy-staging:
          requires:
            - build
          filters:
            branches:
              only: develop
      - deploy-production:
          requires:
            - build
          filters:
            branches:
              only: main
            requires_approval: true
```

## Edge Cases and Pitfalls

### Common Mistakes

1. **Not Caching Dependencies**
   - Cache package managers
   - Reduces build time
   - Saves resources

2. **Running All Tests Sequentially**
   - Use parallelism
   - Split test suites
   - Faster feedback

3. **Not Using Orbs**
   - Reuse common configs
   - Maintain consistency
   - Reduce duplication

## References and Further Reading

- CircleCI Documentation
- CI/CD Best Practices

## Quiz

### Question 1
What file is used to configure CircleCI?

**A)** circle.yml  
**B)** .circleci/config.yml  
**C)** circleci.config.yaml  
**D)** config.circleci.yml

**Answer: B** - CircleCI uses `.circleci/config.yml` for configuration.

## Related Topics

- [API Design Principles](../01_beginners/02.%20API%20Design%20Principles.md)
- [CI/CD Pipeline Design](../03_advanced/06.%20CI_CD%20Pipeline%20Design.md)

