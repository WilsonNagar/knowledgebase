---
number: 7
title: "Building CLI Applications in Go"
slug: "building-cli-applications-in-go"
level: "intermediate"
tags: ["go", "cli", "cobra", "flags", "templates"]
prerequisites: ["working-with-databases-in-go"]
estimated_minutes: 95
contributors: []
diagrams: []
examples: []
canonical_id: "golang-intermediate-07"
---

# Building CLI Applications in Go

## Overview

This guide covers building command-line applications in Go using the flag package, Cobra framework, text templates, environment variables, and best practices for CLI design.

## Deep Explanation

### flag Package

```go
import "flag"

var name = flag.String("name", "World", "Name to greet")
var count = flag.Int("count", 1, "Number of times")

func main() {
    flag.Parse()
    for i := 0; i < *count; i++ {
        fmt.Printf("Hello, %s!\n", *name)
    }
}
```

### Cobra Framework

```go
import "github.com/spf13/cobra"

var rootCmd = &cobra.Command{
    Use:   "app",
    Short: "My application",
    Run: func(cmd *cobra.Command, args []string) {
        // Root command logic
    },
}

var serveCmd = &cobra.Command{
    Use:   "serve",
    Short: "Start server",
    Run: func(cmd *cobra.Command, args []string) {
        // Serve logic
    },
}

func init() {
    rootCmd.AddCommand(serveCmd)
}

func main() {
    rootCmd.Execute()
}
```

### Templates

```go
import "text/template"

tmpl := `Hello, {{.Name}}!
You have {{.Count}} messages.`

t := template.Must(template.New("greet").Parse(tmpl))
t.Execute(os.Stdout, struct {
    Name  string
    Count int
}{"Alice", 5})
```

## Real Code Examples

### Example: File Processor CLI

```go
package main

import (
    "flag"
    "fmt"
    "os"
)

func main() {
    var input = flag.String("input", "", "Input file")
    var output = flag.String("output", "", "Output file")
    var verbose = flag.Bool("verbose", false, "Verbose output")
    
    flag.Parse()
    
    if *input == "" {
        fmt.Fprintf(os.Stderr, "Error: input file required\n")
        flag.Usage()
        os.Exit(1)
    }
    
    if *verbose {
        fmt.Printf("Processing %s -> %s\n", *input, *output)
    }
    
    // Process file...
    fmt.Println("Done")
}
```

## Hard Use-Case: Multi-Command CLI Tool

### Problem Statement

Create a CLI tool with multiple commands, subcommands, and shared flags.

### Solution

```go
package main

import (
    "fmt"
    "github.com/spf13/cobra"
)

var rootCmd = &cobra.Command{
    Use:   "mytool",
    Short: "A CLI tool",
}

var configFile string

var getCmd = &cobra.Command{
    Use:   "get [resource]",
    Short: "Get a resource",
    Args:  cobra.ExactArgs(1),
    Run: func(cmd *cobra.Command, args []string) {
        fmt.Printf("Getting %s\n", args[0])
    },
}

var createCmd = &cobra.Command{
    Use:   "create [resource]",
    Short: "Create a resource",
    Args:  cobra.ExactArgs(1),
    Run: func(cmd *cobra.Command, args []string) {
        fmt.Printf("Creating %s\n", args[0])
    },
}

func init() {
    rootCmd.PersistentFlags().StringVarP(&configFile, "config", "c", "", "Config file")
    rootCmd.AddCommand(getCmd, createCmd)
}

func main() {
    if err := rootCmd.Execute(); err != nil {
        fmt.Fprintf(os.Stderr, "Error: %v\n", err)
        os.Exit(1)
    }
}
```

## References and Further Reading

- [Go flag Package](https://pkg.go.dev/flag)
- [Cobra](https://github.com/spf13/cobra)

## Quiz

### Question 1
What package is used for command-line flags in Go?

**A)** os  
**B)** flag  
**C)** cli  
**D)** args

**Answer: B** - The flag package provides command-line flag parsing.

## Related Topics

- [Working with Databases in Go](./06.%20Working%20with%20Databases%20in%20Go.md)
- [Advanced Go Features](./08.%20Advanced%20Go%20Features.md)

