---
number: 6
title: "Null Safety"
slug: "null-safety"
level: "beginner"
tags: ["kotlin", "null-safety", "nullable-types", "safe-calls"]
prerequisites: [5]
estimated_minutes: 75
contributors: []
diagrams: []
examples: []
canonical_id: "kotlin-beginner-06"
---

# Null Safety

## Overview

Null safety is one of Kotlin's most important features, designed to eliminate the dreaded `NullPointerException`. This guide covers nullable types, safe calls, Elvis operator, not-null assertions, and safe casts.

## Deep Explanation

### Nullable vs Non-Nullable Types

Kotlin distinguishes between types that can hold null and those that cannot:

```kotlin
var name: String = "Kotlin"        // Non-nullable
var nullableName: String? = null   // Nullable (note the ?)

// name = null  // ❌ Compilation error: cannot assign null
nullableName = null  // ✅ Allowed
```

### Safe Call Operator (`?.`)

Safely access properties/methods on nullable objects:

```kotlin
val name: String? = "Kotlin"
val length = name?.length  // Returns Int? (nullable)

val nullName: String? = null
val nullLength = nullName?.length  // Returns null, doesn't throw exception
```

**Chained Safe Calls:**

```kotlin
val person: Person? = getPerson()
val city = person?.address?.city  // Returns null if any part is null
```

### Elvis Operator (`?:`)

Provide default value when expression is null:

```kotlin
val name: String? = null
val displayName = name ?: "Unknown"  // "Unknown"

val length = name?.length ?: 0  // 0 if name is null
```

**With throw:**

```kotlin
val name: String? = null
val nonNullName = name ?: throw IllegalArgumentException("Name required")
```

### Not-Null Assertion (`!!`)

Force unwrap nullable (use carefully!):

```kotlin
val name: String? = "Kotlin"
val length = name!!.length  // Throws exception if name is null

// Dangerous!
val nullName: String? = null
val length = nullName!!.length  // ❌ Throws NullPointerException
```

### Safe Cast (`as?`)

Safely cast with null return on failure:

```kotlin
val obj: Any = "Hello"
val str: String? = obj as? String  // Returns null if cast fails

val num: Int? = obj as? Int  // null (cast fails)
```

### Let Function

Execute block only if value is not null:

```kotlin
val name: String? = "Kotlin"

name?.let {
    println("Name is $it")  // Only executes if name is not null
}

// Multiple nullables
val name: String? = "Alice"
val age: Int? = 25

name?.let { n ->
    age?.let { a ->
        println("$n is $a years old")
    }
}
```

### Also Function

Execute side effects on nullable:

```kotlin
val name: String? = "Kotlin"

name?.also {
    println("Processing: $it")
    // Continue chain
}?.uppercase()
```

### TakeIf & TakeUnless

Conditional null handling:

```kotlin
val number = 42

val even = number.takeIf { it % 2 == 0 }  // 42 (if condition true)
val odd = number.takeUnless { it % 2 == 0 }  // null (if condition false)

// Usage
val result = getUser()?.takeIf { it.isActive }?.process()
```

### Nullable Collections

```kotlin
val list: List<String?> = listOf("a", null, "b", null, "c")

// Filter nulls
val nonNulls = list.filterNotNull()  // [a, b, c]

// Map nullable
val lengths = list.map { it?.length }  // [1, null, 1, null, 1]
val nonNullLengths = list.mapNotNull { it?.length }  // [1, 1, 1]
```

### Platform Types

When calling Java code, Kotlin doesn't know nullability:

```kotlin
// Java method returns String (could be null)
val result = javaMethod()  // Platform type String!

// Make it explicit
val result: String? = javaMethod()  // Nullable
val result: String = javaMethod()   // Non-null (assertion)
```

### Examples

#### Example 1: Safe Property Access

```kotlin
class Address(val street: String?, val city: String?)
class Person(val name: String, val address: Address?)

fun getCityName(person: Person?): String {
    return person?.address?.city ?: "Unknown"
}
```

#### Example 2: Nullable Function Parameters

```kotlin
fun greet(name: String?, greeting: String = "Hello") {
    val displayName = name ?: "Guest"
    println("$greeting, $displayName!")
}

greet("Alice")        // "Hello, Alice!"
greet(null)           // "Hello, Guest!"
greet(null, "Hi")      // "Hi, Guest!"
```

#### Example 3: Safe Collection Operations

```kotlin
fun processUsers(users: List<User?>): List<String> {
    return users
        .filterNotNull()
        .filter { it.isActive }
        .map { it.name }
}
```

## Summary

Kotlin's null safety prevents null pointer exceptions:
- `?` makes types nullable
- `?.` safely accesses properties/methods
- `?:` provides default values
- `!!` forces unwrap (use carefully)
- `as?` safely casts
- `let`, `also`, `takeIf` provide additional null handling

## Next Steps

- Learn about collections
- Understand extension functions
- Explore generics
- Master coroutines basics

