---
number: 3
title: "Control Flow & Loops"
slug: "control-flow-and-loops"
level: "beginner"
tags: ["kotlin", "control-flow", "loops", "conditionals", "when"]
prerequisites: [2]
estimated_minutes: 60
contributors: []
diagrams: []
examples: []
canonical_id: "kotlin-beginner-03"
---

# Control Flow & Loops

## Overview

Control flow determines the order in which statements are executed. Kotlin provides `if`, `when`, `for`, `while`, and `do-while` constructs, with some unique features like `when` expressions and ranges.

## Deep Explanation

### If Expression

In Kotlin, `if` is an expression (returns a value), not just a statement:

```kotlin
// Traditional if statement
val max: Int
if (a > b) {
    max = a
} else {
    max = b
}

// If expression (returns value)
val max = if (a > b) a else b

// Multi-line if expression
val max = if (a > b) {
    println("a is larger")
    a
} else {
    println("b is larger")
    b
}
```

### When Expression

`when` replaces Java's `switch` and is much more powerful:

#### Basic When

```kotlin
when (x) {
    1 -> println("One")
    2 -> println("Two")
    3 -> println("Three")
    else -> println("Other")
}
```

#### When as Expression

```kotlin
val result = when (x) {
    1 -> "One"
    2 -> "Two"
    3 -> "Three"
    else -> "Other"
}
```

#### Multiple Conditions

```kotlin
when (x) {
    1, 2 -> println("One or Two")
    3 -> println("Three")
    in 4..10 -> println("Between 4 and 10")
    else -> println("Other")
}
```

#### When Without Argument

```kotlin
when {
    x > 0 -> println("Positive")
    x < 0 -> println("Negative")
    else -> println("Zero")
}
```

#### Type Checking

```kotlin
fun process(obj: Any) {
    when (obj) {
        is String -> println("String: ${obj.length}")
        is Int -> println("Int: $obj")
        is Boolean -> println("Boolean: $obj")
        else -> println("Unknown")
    }
}
```

### For Loops

#### Range Iteration

```kotlin
// Inclusive range
for (i in 1..5) {
    println(i)  // 1, 2, 3, 4, 5
}

// Exclusive range (until)
for (i in 1 until 5) {
    println(i)  // 1, 2, 3, 4
}

// Downward range
for (i in 5 downTo 1) {
    println(i)  // 5, 4, 3, 2, 1
}

// Step
for (i in 1..10 step 2) {
    println(i)  // 1, 3, 5, 7, 9
}
```

#### Collection Iteration

```kotlin
val list = listOf("a", "b", "c")

// Iterate over elements
for (item in list) {
    println(item)
}

// Iterate with index
for ((index, value) in list.withIndex()) {
    println("$index: $value")
}

// Iterate over map
val map = mapOf("a" to 1, "b" to 2, "c" to 3)
for ((key, value) in map) {
    println("$key -> $value")
}
```

#### Array/List Iteration

```kotlin
val array = arrayOf(1, 2, 3, 4, 5)

// By index
for (i in array.indices) {
    println(array[i])
}

// By index and value
for ((index, value) in array.withIndex()) {
    println("$index: $value")
}
```

### While Loops

#### While

```kotlin
var x = 0
while (x < 5) {
    println(x)
    x++
}
```

#### Do-While

```kotlin
var x = 0
do {
    println(x)
    x++
} while (x < 5)
```

**Difference**: `do-while` executes at least once, even if condition is false initially.

### Break & Continue

#### Break

```kotlin
for (i in 1..10) {
    if (i == 5) break
    println(i)  // 1, 2, 3, 4
}
```

#### Labeled Break

```kotlin
outer@ for (i in 1..3) {
    inner@ for (j in 1..3) {
        if (j == 2) break@outer
        println("i=$i, j=$j")
    }
}
// Output: i=1, j=1
```

#### Continue

```kotlin
for (i in 1..10) {
    if (i % 2 == 0) continue
    println(i)  // 1, 3, 5, 7, 9
}
```

#### Labeled Continue

```kotlin
outer@ for (i in 1..3) {
    inner@ for (j in 1..3) {
        if (j == 2) continue@outer
        println("i=$i, j=$j")
    }
}
```

### Return in Loops

#### Return from Function

```kotlin
fun findFirstEven(numbers: List<Int>): Int? {
    for (num in numbers) {
        if (num % 2 == 0) return num
    }
    return null
}
```

#### Return to Label

```kotlin
fun process() {
    listOf(1, 2, 3).forEach {
        if (it == 2) return@forEach  // Returns to forEach, not process()
        println(it)
    }
    println("Done")
}
```

### Ranges

#### Creating Ranges

```kotlin
val range1 = 1..10        // Inclusive: 1, 2, ..., 10
val range2 = 1 until 10    // Exclusive: 1, 2, ..., 9
val range3 = 10 downTo 1   // Reversed: 10, 9, ..., 1
val range4 = 1..10 step 2  // With step: 1, 3, 5, 7, 9
```

#### Range Operations

```kotlin
val range = 1..10

// Check membership
println(5 in range)        // true
println(15 in range)      // false
println(5 !in range)      // false

// Iterate
for (i in range) {
    println(i)
}

// First, last, step
println(range.first)      // 1
println(range.last)        // 10
println(range.step)       // 1
```

#### Char Ranges

```kotlin
for (c in 'a'..'z') {
    print(c)  // abcdefghijklmnopqrstuvwxyz
}

if ('c' in 'a'..'z') {
    println("Lowercase")
}
```

### Examples

#### Example 1: Grade Calculator

```kotlin
fun calculateGrade(score: Int): String {
    return when {
        score >= 90 -> "A"
        score >= 80 -> "B"
        score >= 70 -> "C"
        score >= 60 -> "D"
        else -> "F"
    }
}
```

#### Example 2: FizzBuzz

```kotlin
fun fizzBuzz(n: Int) {
    for (i in 1..n) {
        when {
            i % 15 == 0 -> println("FizzBuzz")
            i % 3 == 0 -> println("Fizz")
            i % 5 == 0 -> println("Buzz")
            else -> println(i)
        }
    }
}
```

#### Example 3: Finding Primes

```kotlin
fun isPrime(n: Int): Boolean {
    if (n < 2) return false
    for (i in 2 until n) {
        if (n % i == 0) return false
    }
    return true
}

fun findPrimes(limit: Int): List<Int> {
    val primes = mutableListOf<Int>()
    for (i in 2..limit) {
        if (isPrime(i)) {
            primes.add(i)
        }
    }
    return primes
}
```

#### Example 4: Pattern Matching

```kotlin
fun describe(obj: Any): String {
    return when (obj) {
        is String -> "String with length ${obj.length}"
        is Int -> "Integer: $obj"
        is Boolean -> "Boolean: $obj"
        is List<*> -> "List with ${obj.size} elements"
        else -> "Unknown type"
    }
}
```

## Summary

Kotlin's control flow is expressive and concise:
- `if` is an expression, not just a statement
- `when` replaces `switch` with more power
- `for` loops work with ranges and collections
- `while` and `do-while` for conditional loops
- `break` and `continue` with labels for complex control
- Ranges provide elegant iteration syntax

## Next Steps

- Learn about functions and lambdas
- Understand classes and objects
- Explore null safety
- Master collections

