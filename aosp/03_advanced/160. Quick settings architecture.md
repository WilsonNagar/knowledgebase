---
number: 160
title: Quick settings architecture
slug: quick-settings-architecture
level: advanced
tags:
  - aosp
  - systemui
  - quick-settings
  - tiles
  - system-components
prerequisites:
  - systemui-architecture
  - systemui-process-architecture
  - android-architecture-complete-overview
estimated_minutes: 95
contributors: []
diagrams: []
examples: []
canonical_id: aosp-advanced-160
---

# Quick settings architecture

## Overview

Quick settings architecture refers to the internal implementation and architecture of Android's quick settings system, including how quick settings tiles are organized, how tiles interact with system services, how tile states are managed, how tiles are displayed, and how quick settings integrates with the notification panel. Understanding quick settings architecture is essential for AOSP development, as it explains how quick settings tiles are implemented, how tile states are synchronized with system services, how tiles are rendered, how user interactions are handled, and how quick settings can be customized. This guide provides a comprehensive overview of quick settings architecture, tile organization, tile implementation, state management, system integration, and customization.

Think of quick settings architecture like a control panel: just as a control panel has multiple switches and controls (quick settings tiles) that control different systems (Wi-Fi, Bluetooth, Location), each connected to their respective systems (network service, Bluetooth service, location service), quick settings has multiple tiles that control different Android system features, each connected to their respective system services.

## Deep Explanation

### What is Quick Settings Architecture?

Quick settings architecture refers to the internal implementation and architecture of Android's quick settings system, including how quick settings tiles are organized, how tiles interact with system services, how tile states are managed, and how quick settings integrates with the notification panel and system services.

**Key Characteristics:**
- **Tile-Based:** Tile-based architecture
- **System Integration:** Integrated with system services
- **State Management:** Dynamic state management
- **User Interaction:** User interaction handling
- **Customizable:** Customizable tiles

**Why Quick Settings Architecture?**
- **Quick Access:** Quick access to system features
- **User Experience:** Enhanced user experience
- **System Control:** System feature control
- **Customization:** Tile customization

### Quick Settings Components

#### Quick Settings Panel

**Quick Settings Panel:**
- Tile container
- Tile layout
- Panel visibility
- Panel animations

**Panel Structure:**
```
Quick Settings Panel
├── Header (Clock, Settings)
├── Tile Grid
│   ├── Tile 1 (Wi-Fi)
│   ├── Tile 2 (Bluetooth)
│   ├── Tile 3 (Location)
│   └── ...
└── Footer (Edit, More)
```

#### Quick Settings Tiles

**Quick Settings Tiles:**
- Individual feature tiles
- Tile state display
- Tile interactions
- Tile updates

**Tile Types:**
- **Toggle Tiles:** On/off toggles (Wi-Fi, Bluetooth)
- **State Tiles:** State display (Battery, Signal)
- **Action Tiles:** Action triggers (Flashlight, Cast)
- **Custom Tiles:** Custom implementations

### Tile Architecture

#### Tile Structure

**Tile Structure:**
- Tile view (UI component)
- Tile controller (logic)
- Tile state (current state)
- Tile listener (state updates)

**Tile Components:**
```java
// Tile structure
public class QSTile {
    // Tile state
    // Tile view
    // Tile controller
    // Tile listeners
}
```

#### Tile Implementation

**Tile Implementation:**
- Extend QSTile base class
- Implement tile logic
- Define tile state
- Handle user interactions

**Tile Example:**
```java
public class WiFiTile extends QSTile<BooleanState> {
    @Override
    protected void handleClick() {
        // Toggle Wi-Fi
        wifiManager.setWifiEnabled(!mState.value);
    }
    
    @Override
    protected void handleUpdateState(BooleanState state, Object arg) {
        // Update tile state
        state.value = wifiManager.isWifiEnabled();
        state.label = "Wi-Fi";
    }
}
```

### Tile State Management

#### State Synchronization

**State Synchronization:**
- Tile state ↔ System service state
- Real-time updates
- State consistency
- Change notifications

**Synchronization Process:**
```
1. System service state changes
2. Service notifies tile
3. Tile updates state
4. Tile view updates
5. UI reflects new state
```

#### State Updates

**State Update Sources:**
- System service changes
- User interactions
- System events
- Configuration changes

**Update Mechanisms:**
- Broadcast receivers
- Service callbacks
- Event listeners
- State observers

### System Service Integration

#### Service Integration

**Service Integration:**
- Wi-Fi service (WiFiManager)
- Bluetooth service (BluetoothAdapter)
- Location service (LocationManager)
- Settings service (Settings)

**Integration Methods:**
- Direct service calls
- Broadcast receivers
- Service callbacks
- Content observers

#### Tile-Service Communication

**Communication Methods:**
```java
// Direct service call
WifiManager wifiManager = getSystemService(WifiManager.class);
boolean enabled = wifiManager.isWifiEnabled();

// Broadcast receiver
registerReceiver(wifiReceiver, new IntentFilter(WifiManager.WIFI_STATE_CHANGED_ACTION));

// Service callback
wifiManager.registerListener(wifiListener);
```

### Tile Rendering

#### Tile View

**Tile View:**
- Icon display
- Label display
- State indicator
- Interaction handling

**View Components:**
- Icon view
- Label view
- State indicator
- Click handler

#### Tile Layout

**Tile Layout:**
- Grid layout
- Tile sizing
- Tile spacing
- Responsive layout

**Layout Configuration:**
- Columns per row
- Tile size
- Spacing
- Padding

### User Interactions

#### Tile Interactions

**Interaction Types:**
- **Click:** Toggle/action
- **Long Press:** Settings/options
- **Swipe:** Expand/collapse
- **Drag:** Reorder tiles

**Interaction Handling:**
```java
@Override
protected void handleClick() {
    // Handle click
    toggleFeature();
}

@Override
protected void handleLongClick() {
    // Handle long click
    openSettings();
}
```

#### Panel Interactions

**Panel Interactions:**
- Expand/collapse panel
- Scroll tiles
- Edit tiles
- Access settings

**Panel Gestures:**
- Swipe down: Expand
- Swipe up: Collapse
- Tap: Interact with tile
- Long press: Tile options

### Tile Customization

#### Adding Custom Tiles

**Custom Tile Creation:**
```java
// Create custom tile
public class CustomTile extends QSTile<BooleanState> {
    // Custom implementation
}

// Register tile
tileHost.addTile(new CustomTile(tileHost));
```

#### Tile Configuration

**Tile Configuration:**
- Tile order
- Tile visibility
- Tile availability
- Tile permissions

**Configuration Methods:**
- Settings UI
- Configuration files
- System properties
- Build configuration

### Quick Settings Panel Management

#### Panel Lifecycle

**Panel Lifecycle:**
- Panel creation
- Panel display
- Panel updates
- Panel dismissal

**Lifecycle Management:**
- Panel visibility
- Panel state
- Panel animations
- Panel cleanup

#### Panel State

**Panel States:**
- **HIDDEN:** Panel hidden
- **COLLAPSED:** Panel collapsed
- **EXPANDED:** Panel expanded
- **EDITING:** Editing tiles

**State Transitions:**
```
HIDDEN → COLLAPSED → EXPANDED
  ↑         ↓            ↓
  └─────────┴────────────┘
```

### System Integration

#### Notification Panel Integration

**Notification Panel Integration:**
- Quick settings in notification panel
- Panel expansion
- Panel collapse
- Panel coordination

**Integration Points:**
- Shared panel container
- Coordinated animations
- State synchronization
- User interaction

#### SystemUI Integration

**SystemUI Integration:**
- SystemUI service
- Component coordination
- State management
- Event handling

**Integration Methods:**
- Service communication
- Event broadcasting
- State sharing
- Component coordination

### Debugging Quick Settings

#### Tile State Inspection

**State Inspection:**
```bash
# Quick settings state
adb shell dumpsys activity | grep -i "quick.*settings"

# Tile states
adb shell dumpsys activity | grep -A 20 "QSTile"
```

#### Tile Logs

**Tile Logs:**
```bash
# Quick settings logs
adb logcat | grep QuickSettings

# Tile-specific logs
adb logcat | grep QSTile

# SystemUI logs
adb logcat | grep SystemUI
```

### Quick Settings Best Practices

#### Best Practices

**Best Practices:**
- Efficient state updates
- Smooth animations
- Responsive interactions
- Proper service integration
- Battery efficiency

**Practice Guidelines:**
- **Updates:** Efficient state updates
- **Animations:** Smooth animations
- **Interactions:** Responsive user interactions
- **Integration:** Proper service integration
- **Efficiency:** Battery-efficient operations

## Key Takeaways

1. **Quick settings architecture** refers to the internal implementation and architecture of Android's quick settings system, including how quick settings tiles are organized, how tiles interact with system services, how tile states are managed, and how quick settings integrates with the notification panel.

2. **Quick settings components** include quick settings panel (tile container, tile layout, panel visibility, panel animations), panel structure, quick settings tiles (individual feature tiles, tile state display, tile interactions, tile updates), and tile types (toggle tiles, state tiles, action tiles, custom tiles).

3. **Tile architecture** includes tile structure (tile view, tile controller, tile state, tile listener), tile components, tile implementation (extend QSTile base class, implement tile logic, define tile state, handle user interactions), and tile examples.

4. **Tile state management** includes state synchronization (tile state ↔ system service state, real-time updates, state consistency, change notifications), synchronization process, state updates (system service changes, user interactions, system events, configuration changes), and update mechanisms.

5. **System service integration** includes service integration (Wi-Fi service, Bluetooth service, Location service, Settings service), integration methods (direct service calls, broadcast receivers, service callbacks, content observers), tile-service communication, and communication methods.

6. **Tile rendering** includes tile view (icon display, label display, state indicator, interaction handling), view components, tile layout (grid layout, tile sizing, tile spacing, responsive layout), and layout configuration.

7. **User interactions** include tile interactions (click, long press, swipe, drag), interaction handling, panel interactions (expand/collapse panel, scroll tiles, edit tiles, access settings), and panel gestures.

8. **Tile customization** includes adding custom tiles (create custom tile, register tile), tile configuration (tile order, tile visibility, tile availability, tile permissions), and customization methods.

9. **Understanding quick settings architecture** is essential for AOSP development, enabling quick access implementation, user experience enhancement, system control, and proper quick settings development.

## Related Topics

- **SystemUI architecture:** SystemUI architecture details
- **SystemUI process architecture:** SystemUI process details
- **Status bar service:** Status bar service details

