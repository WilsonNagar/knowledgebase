---
number: 174
title: ADB installation of APEX
slug: adb-installation-of-apex
level: advanced
tags:
  - aosp
  - adb
  - apex
  - installation
  - development
  - testing
prerequisites:
  - apex-package-structure
  - pre-installation-verification
  - adb-remount-dynamic-partitions
estimated_minutes: 95
contributors: []
diagrams: []
examples: []
canonical_id: aosp-advanced-174
---

# ADB installation of APEX

## Overview

ADB installation of APEX refers to the process of installing APEX packages on Android devices using Android Debug Bridge (ADB) tools, enabling developers to install, test, and debug APEX modules during development. Understanding ADB installation of APEX is essential for AOSP development, as it explains how to install APEX packages via ADB, how to verify installations, how to manage APEX modules, how to debug installation issues, and how ADB installation supports development workflows. This guide provides a comprehensive overview of ADB installation of APEX, installation commands, installation process, verification methods, management commands, and development workflows.

Think of ADB installation of APEX like manually installing software on a computer: just as you can manually install software packages on a computer using command-line tools, ADB installation allows you to manually install APEX packages on Android devices using ADB commands, enabling development, testing, and debugging without going through the normal update channels.

## Deep Explanation

### What is ADB Installation of APEX?

ADB installation of APEX refers to the process of installing APEX packages on Android devices using Android Debug Bridge (ADB) tools, enabling developers to install and test APEX modules during development.

**Key Characteristics:**
- **Manual Installation:** Manual installation via ADB
- **Development Tool:** Development and testing tool
- **Direct Installation:** Direct package installation
- **Debugging Support:** Supports debugging workflows
- **Testing:** Enables testing and validation

**Why ADB Installation of APEX?**
- **Development:** Enable development workflows
- **Testing:** Test APEX modules
- **Debugging:** Debug installation issues
- **Validation:** Validate APEX packages

### ADB Installation Commands

#### Basic Installation

**Install Command:**
```bash
# Install APEX package
adb install <apex-file>.apex

# Install with options
adb install -r <apex-file>.apex
```

**Command Options:**
- `-r` - Replace existing package
- `-t` - Allow test APKs
- `-d` - Allow version downgrade
- `-g` - Grant all permissions

**Installation Characteristics:**
- Direct package installation
- Command-line interface
- Option support
- Error reporting

#### Installation Options

**Common Options:**
```bash
# Replace existing (upgrade)
adb install -r com.android.media.apex

# Allow test packages
adb install -t test.apex

# Allow downgrade
adb install -d old_version.apex

# Grant all permissions
adb install -g package.apex
```

**Option Characteristics:**
- Replace existing packages
- Test package support
- Version downgrade support
- Permission granting

### Installation Process

#### Installation Steps

**Installation Flow:**
```
1. Connect device via ADB
2. Verify device connection
3. Transfer APEX package
4. Verify package signature
5. Verify package integrity
6. Install APEX package
7. Mount APEX module
8. Activate module
```

**Process Characteristics:**
- Device connection required
- Package transfer
- Verification steps
- Installation and activation

#### Installation Verification

**Verification Steps:**
```bash
# Check installation status
adb shell pm list packages | grep apex

# Check APEX status
adb shell pm list packages -a | grep apex

# Verify module mount
adb shell mount | grep apex
```

**Verification Characteristics:**
- Package listing
- Status checking
- Mount verification
- Module verification

### APEX Management Commands

#### Listing APEX Modules

**List Commands:**
```bash
# List all APEX packages
adb shell pm list packages | grep apex

# List active APEX modules
adb shell ls /apex/

# List installed APEX
adb shell pm list packages -a | grep apex
```

**Listing Characteristics:**
- Package enumeration
- Active module listing
- Installation status
- Module information

#### APEX Status Commands

**Status Commands:**
```bash
# Check APEX status
adb shell pm dump <package-name>

# Check module version
adb shell pm dump <package-name> | grep version

# Check module path
adb shell pm path <package-name>
```

**Status Characteristics:**
- Package information
- Version information
- Path information
- Status details

### Installation Workflows

#### Development Workflow

**Development Process:**
```
1. Build APEX package
2. Install via ADB
3. Test functionality
4. Debug issues
5. Iterate
```

**Workflow Characteristics:**
- Build-install-test cycle
- Rapid iteration
- Debugging support
- Development efficiency

#### Testing Workflow

**Testing Process:**
```
1. Prepare test APEX
2. Install test package
3. Run tests
4. Verify results
5. Clean up
```

**Workflow Characteristics:**
- Test package preparation
- Installation
- Test execution
- Result verification
- Cleanup

### Installation Troubleshooting

#### Common Issues

**Installation Failures:**
- Signature verification failure
- Insufficient storage
- Compatibility issues
- Permission problems

**Issue Resolution:**
```bash
# Check storage
adb shell df -h

# Check permissions
adb shell ls -la /data/apex/

# Check logs
adb logcat | grep apex
```

**Troubleshooting Characteristics:**
- Storage checking
- Permission verification
- Log analysis
- Issue diagnosis

#### Error Messages

**Common Errors:**
- `INSTALL_FAILED_INSUFFICIENT_STORAGE`
- `INSTALL_FAILED_INVALID_APK`
- `INSTALL_FAILED_UPDATE_INCOMPATIBLE`
- `INSTALL_PARSE_FAILED_NO_CERTIFICATES`

**Error Resolution:**
- Check storage space
- Verify package format
- Check compatibility
- Verify signatures

### Installation Best Practices

#### Best Practices

**Best Practices:**
- Verify package before installation
- Check device compatibility
- Monitor installation logs
- Test after installation
- Clean up test packages

**Practice Guidelines:**
- **Verification:** Verify package before installation
- **Compatibility:** Check device compatibility
- **Monitoring:** Monitor installation logs
- **Testing:** Test after installation
- **Cleanup:** Clean up test packages

### APEX Uninstallation

#### Uninstallation Commands

**Uninstall Commands:**
```bash
# Uninstall APEX package
adb uninstall <package-name>

# Uninstall with data
adb uninstall -k <package-name>
```

**Uninstall Characteristics:**
- Package removal
- Data preservation option
- Module deactivation
- Cleanup process

#### Uninstallation Process

**Uninstall Steps:**
```
1. Unmount APEX module
2. Remove package
3. Clean up data (optional)
4. Verify removal
```

**Process Characteristics:**
- Module unmounting
- Package removal
- Data cleanup
- Verification

### Development Tools

#### ADB Tools

**ADB Tools:**
- `adb install` - Install packages
- `adb uninstall` - Uninstall packages
- `adb shell pm` - Package manager
- `adb logcat` - View logs

**Tool Characteristics:**
- Package management
- System interaction
- Log viewing
- Debugging support

#### APEX Tools

**APEX Tools:**
- `apexutil` - APEX utilities
- `apexd` - APEX daemon
- APEX management commands

**Tool Characteristics:**
- APEX-specific tools
- Management utilities
- System integration
- Development support

### Installation Security

#### Security Considerations

**Security Aspects:**
- Signature verification
- Package integrity
- Installation permissions
- System security

**Security Characteristics:**
- Cryptographic verification
- Integrity checking
- Permission enforcement
- System protection

#### Development vs Production

**Development:**
- Test packages allowed
- Debugging enabled
- Relaxed security
- Development tools

**Production:**
- Signed packages required
- Security enforced
- Verification required
- Production standards

### Installation Best Practices

#### Best Practices

**Best Practices:**
- Use signed packages
- Verify before installation
- Test thoroughly
- Monitor installation
- Document process

**Practice Guidelines:**
- **Signing:** Use signed packages
- **Verification:** Verify before installation
- **Testing:** Test thoroughly
- **Monitoring:** Monitor installation
- **Documentation:** Document process

## Key Takeaways

1. **ADB installation of APEX** refers to the process of installing APEX packages on Android devices using Android Debug Bridge (ADB) tools, enabling developers to install and test APEX modules during development.

2. **ADB installation commands** include basic installation (install APEX package, install with options), installation options (replace existing, allow test packages, allow downgrade, grant permissions), and command characteristics.

3. **Installation process** includes installation steps (connect device via ADB, verify device connection, transfer APEX package, verify package signature, verify package integrity, install APEX package, mount APEX module, activate module), installation verification (check installation status, check APEX status, verify module mount), and process characteristics.

4. **APEX management commands** include listing APEX modules (list all APEX packages, list active APEX modules, list installed APEX), APEX status commands (check APEX status, check module version, check module path), and management characteristics.

5. **Installation workflows** include development workflow (build APEX package, install via ADB, test functionality, debug issues, iterate), testing workflow (prepare test APEX, install test package, run tests, verify results, clean up), and workflow characteristics.

6. **Installation troubleshooting** includes common issues (signature verification failure, insufficient storage, compatibility issues, permission problems), error messages (common errors, error resolution), and troubleshooting characteristics.

7. **APEX uninstallation** includes uninstallation commands (uninstall APEX package, uninstall with data), uninstallation process (unmount APEX module, remove package, clean up data, verify removal), and uninstallation characteristics.

8. **Development tools** include ADB tools (adb install, adb uninstall, adb shell pm, adb logcat), APEX tools (apexutil, apexd, APEX management commands), and tool characteristics.

9. **Understanding ADB installation of APEX** is essential for AOSP development, enabling development workflows, testing, debugging, and proper APEX module management.

## Related Topics

- **APEX package structure:** Package structure details
- **Pre-installation verification:** Verification details
- **adb remount & dynamic partitions:** ADB details

