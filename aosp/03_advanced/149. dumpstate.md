---
number: 149
title: dumpstate
slug: dumpstate
level: advanced
tags:
  - aosp
  - debugging
  - dumpstate
  - bug-report
  - system-tools
  - system-state-dump
prerequisites:
  - android-architecture-complete-overview
  - dumpsys
  - logcat-advanced-filters-buffers
estimated_minutes: 95
contributors: []
diagrams: []
examples: []
canonical_id: aosp-advanced-149
---

# dumpstate

## Overview

dumpstate is a system tool that collects comprehensive system state information, creating a detailed bug report containing logs, system dumps, configuration information, and diagnostic data. dumpstate is typically invoked automatically when a bug report is requested, but can also be run manually to capture complete system state for debugging and analysis. Understanding dumpstate is essential for AOSP development, as it explains how to generate bug reports, how dumpstate collects system information, what information is included in bug reports, how to analyze bug reports, and how dumpstate provides comprehensive system visibility. This guide provides a comprehensive overview of dumpstate, bug report generation, dumpstate output, bug report analysis, and debugging techniques.

Think of dumpstate like a comprehensive system health check: just as a medical checkup collects information from various body systems (heart rate, blood pressure, lab tests, X-rays) to create a complete health report, dumpstate collects information from various Android system components (logs, service states, configurations, diagnostics) to create a complete system state report.

## Deep Explanation

### What is dumpstate?

dumpstate is a system tool that collects comprehensive system state information, creating a detailed bug report containing logs, system dumps, configuration information, and diagnostic data. dumpstate provides a complete snapshot of the Android system state for debugging and analysis.

**Key Characteristics:**
- **Comprehensive:** Collects comprehensive system information
- **Automatic:** Automatically invoked for bug reports
- **Manual:** Can be run manually
- **Detailed:** Detailed system state information
- **Complete:** Complete system snapshot

**Why dumpstate?**
- **Bug Reports:** Generate bug reports
- **System Analysis:** Analyze system state
- **Debugging:** Comprehensive debugging tool
- **Diagnostics:** System diagnostics

### Bug Report Generation

#### Automatic Bug Report

**Automatic Bug Report:**
- Triggered by user action
- Generated via Developer Options
- Generated via ADB command
- Complete system snapshot

**Triggering Bug Report:**
```bash
# Generate bug report via ADB
adb bugreport

# Generate bug report to specific location
adb bugreport /path/to/bugreport.zip

# Generate bug report with timestamp
adb bugreport bugreport_$(date +%Y%m%d_%H%M%S).zip
```

#### Manual dumpstate

**Manual dumpstate:**
- Run dumpstate directly
- Collect specific information
- Custom dumpstate execution
- Targeted information collection

**Manual Execution:**
```bash
# Run dumpstate directly
adb shell dumpstate

# Save to file
adb shell dumpstate > dumpstate.txt

# Run with options
adb shell dumpstate -o /sdcard/dumpstate.txt
```

### dumpstate Output

#### Bug Report Contents

**Bug Report Contents:**
- System logs (logcat)
- System service dumps (dumpsys)
- System configuration
- Process information
- Memory information
- Network information
- Hardware information

**Bug Report Structure:**
```
bugreport-YYYY-MM-DD-HH-MM-SS.zip
├── main_entry.txt          # Main bug report entry
├── dumpstate-*.txt         # dumpstate output
├── logcat.txt              # Logcat logs
├── dumpsys_*.txt           # Service dumps
└── ...
```

#### dumpstate Sections

**dumpstate Sections:**
- System information
- Build information
- Process information
- Memory information
- Network information
- Storage information
- Hardware information
- Service dumps

**Common Sections:**
- **System Info:** System version, build info
- **Process List:** All running processes
- **Memory Info:** Memory usage, statistics
- **Network Info:** Network configuration, connections
- **Storage Info:** Storage usage, partitions
- **Hardware Info:** Hardware configuration
- **Service Dumps:** dumpsys output for all services

### dumpstate Information

#### System Information

**System Information:**
- Android version
- Build fingerprint
- Build date
- Kernel version
- Device model
- Hardware information

**System Info Example:**
```
========================================================
== dumpstate: 2024-01-15 10:30:45
========================================================
Build: google/sdk_gphone64_arm64/emu64xa:13/...
Build fingerprint: google/sdk_gphone64_arm64/emu64xa:13/...
Bootloader: unknown
Radio: unknown
Network: (unknown)
Kernel: Linux version 5.10.107-android12-9-...
```

#### Process Information

**Process Information:**
- Process list
- Process details
- Thread information
- CPU usage
- Memory usage

**Process Info Example:**
```
========================================================
== Process list
========================================================
USER      PID   PPID  VSIZE  RSS   WCHAN    PC         NAME
root      1     0     1234   567   ...      ...        init
system    1000  1     12345  5678  ...      ...        system_server
...
```

#### Memory Information

**Memory Information:**
- Memory statistics
- Memory usage by process
- Memory pressure
- Low memory killer info
- OOM scores

**Memory Info Example:**
```
========================================================
== Memory info
========================================================
MemTotal:         2048000 kB
MemFree:           512000 kB
MemAvailable:     768000 kB
...
```

#### Network Information

**Network Information:**
- Network interfaces
- Network configuration
- Active connections
- Network statistics
- DNS configuration

**Network Info Example:**
```
========================================================
== Network info
========================================================
Interface: wlan0
  IP: 192.168.1.100
  Netmask: 255.255.255.0
  Gateway: 192.168.1.1
...
```

### dumpstate Options

#### Common Options

**Common Options:**
- Output file specification
- Verbose output
- Specific sections
- Compression options

**Option Examples:**
```bash
# Specify output file
adb shell dumpstate -o /sdcard/dumpstate.txt

# Verbose output
adb shell dumpstate -v

# Specific sections (if supported)
adb shell dumpstate -s memory,network
```

### Bug Report Analysis

#### Analyzing Bug Reports

**Analyzing Bug Reports:**
- Extract bug report
- Review main entry
- Check logs
- Review service dumps
- Identify issues

**Analysis Process:**
1. Extract bug report ZIP
2. Review main_entry.txt
3. Check logcat.txt for errors
4. Review relevant dumpsys sections
5. Identify problem areas
6. Correlate information

#### Common Analysis Tasks

**Task 1: Check for Crashes**
```bash
# Extract bug report
unzip bugreport.zip

# Check for crash logs
grep -i "fatal\|crash\|exception" logcat.txt

# Check ANR traces
grep -i "anr" logcat.txt
```

**Task 2: Check Memory Issues**
```bash
# Check memory info
grep -A 20 "Memory info" dumpstate-*.txt

# Check process memory
grep "meminfo" dumpstate-*.txt
```

**Task 3: Check Service State**
```bash
# Check specific service
grep -A 50 "DUMP OF SERVICE" dumpstate-*.txt | grep -A 50 "activity"
```

### dumpstate Best Practices

#### Best Practices

**Best Practices:**
- Generate bug reports when issues occur
- Include relevant context
- Save bug reports for analysis
- Review bug reports systematically

**Practice Guidelines:**
- **Timing:** Generate bug reports when issues occur
- **Context:** Include relevant context (what was happening)
- **Storage:** Save bug reports for later analysis
- **Systematic Review:** Review bug reports systematically

### dumpstate Integration

#### Integration with Other Tools

**Integration:**
- Use with logcat
- Use with dumpsys
- Use with other debugging tools
- Comprehensive debugging

**Integration Examples:**
```bash
# Generate bug report
adb bugreport

# Also check live logs
adb logcat -d

# Check specific service
adb shell dumpsys activity
```

### Debugging with dumpstate

#### Common Debugging Scenarios

**Scenario 1: System Crash**
```bash
# Generate bug report after crash
adb bugreport crash_report.zip

# Analyze crash information
unzip crash_report.zip
grep -i "crash\|fatal" logcat.txt
```

**Scenario 2: Performance Issues**
```bash
# Generate bug report
adb bugreport performance_report.zip

# Check CPU and memory
grep -A 20 "CPU\|Memory" dumpstate-*.txt
```

**Scenario 3: ANR Issues**
```bash
# Generate bug report
adb bugreport anr_report.zip

# Check ANR traces
grep -i "anr" logcat.txt
cat /data/anr/traces.txt
```

## Key Takeaways

1. **dumpstate** is a system tool that collects comprehensive system state information, creating a detailed bug report containing logs, system dumps, configuration information, and diagnostic data.

2. **Bug report generation** includes automatic bug report (triggered by user action, generated via Developer Options, generated via ADB command), manual dumpstate (run dumpstate directly, collect specific information, custom dumpstate execution), and generation methods.

3. **dumpstate output** includes bug report contents (system logs, system service dumps, system configuration, process information, memory information, network information, hardware information), bug report structure, dumpstate sections (system information, build information, process information, memory information, network information, storage information, hardware information, service dumps), and output structure.

4. **dumpstate information** includes system information (Android version, build fingerprint, build date, kernel version, device model, hardware information), process information (process list, process details, thread information, CPU usage, memory usage), memory information (memory statistics, memory usage by process, memory pressure, low memory killer info), network information (network interfaces, network configuration, active connections, network statistics, DNS configuration), and information types.

5. **dumpstate options** include common options (output file specification, verbose output, specific sections, compression options), option examples, and option usage.

6. **Bug report analysis** includes analyzing bug reports (extract bug report, review main entry, check logs, review service dumps, identify issues), common analysis tasks (check for crashes, check memory issues, check service state), and analysis process.

7. **dumpstate best practices** include best practices (generate bug reports when issues occur, include relevant context, save bug reports for analysis, review bug reports systematically), practice guidelines, and implementation practices.

8. **dumpstate integration** includes integration with other tools (use with logcat, use with dumpsys, use with other debugging tools), integration examples, and comprehensive debugging.

9. **Understanding dumpstate** is essential for AOSP development, enabling bug report generation, system state analysis, comprehensive debugging, and proper dumpstate usage.

## Related Topics

- **logcat (advanced filters, buffers):** Logcat details
- **dumpsys:** Service dumps details
- **systrace & perfetto:** System tracing details

