---
number: 37
title: Differences between Android kernel & Linux kernel
slug: differences-android-kernel-linux-kernel
level: beginner
tags:
  - aosp
  - kernel
  - linux
  - android
  - differences
  - modifications
  - drivers
prerequisites:
  - android-architecture-complete-overview
  - boot-process-overview
estimated_minutes: 80
contributors: []
diagrams: []
examples: []
canonical_id: aosp-beginner-37
---

# Differences between Android kernel & Linux kernel

## Overview

The Android kernel is based on the Linux kernel but includes significant Android-specific modifications and features. Understanding the differences between the Android kernel and the standard Linux kernel is essential for AOSP development, as it explains why Android behaves differently, what Android-specific features exist, and how Android extends Linux for mobile devices. This guide provides a comprehensive overview of the key differences, Android-specific features, and modifications that make the Android kernel unique.

Think of the Android kernel like a specialized version of Linux: just as a race car is based on a standard car chassis but has specialized modifications for racing (engine, suspension, aerodynamics), the Android kernel is based on Linux but has specialized modifications for mobile devices (power management, memory management, Android-specific drivers). The foundation is the same, but the modifications make it optimized for Android's unique requirements.

## Deep Explanation

### What is the Android Kernel?

The Android kernel is a modified version of the Linux kernel that includes Android-specific features, drivers, and modifications optimized for mobile devices. It's the foundation of the Android operating system, providing hardware abstraction and core system services.

**Key Characteristics:**
- **Based on Linux:** Built on Linux kernel foundation
- **Android-Specific:** Includes Android modifications
- **Mobile-Optimized:** Optimized for mobile devices
- **Extended:** Adds Android-specific features

**Why Modify Linux?**
- **Mobile Requirements:** Mobile devices have unique needs
- **Power Management:** Critical for battery life
- **Performance:** Optimized for mobile hardware
- **Features:** Android-specific functionality

### Core Relationship

#### Linux Foundation

**Base:**
- Android kernel starts with Linux kernel
- Uses Linux kernel core
- Maintains Linux compatibility
- Follows Linux development

**Version Tracking:**
- Android kernels track Linux versions
- Usually based on LTS (Long Term Support) versions
- Android-specific patches applied
- Maintained separately

**Compatibility:**
- Maintains Linux API compatibility
- Supports Linux features
- Can run Linux software (with limitations)
- Linux kernel modules work (mostly)

#### Android Modifications

**Modifications:**
- Android-specific patches
- Custom drivers
- Modified subsystems
- New features

**Extent:**
- Significant modifications
- Thousands of patches
- Custom subsystems
- Android-specific code

### Key Differences

#### 1. Power Management

**Linux Kernel:**
- Standard power management
- Suspend/resume
- CPU frequency scaling
- Generic power states

**Android Kernel:**
- **Wakelocks:** Prevent system sleep
- **Early Suspend:** Early display suspend
- **Wakeup Sources:** Track what wakes system
- **Power Management Framework:** Android-specific PM

**Why Different:**
- Mobile devices need aggressive power management
- Battery life is critical
- Apps need to prevent sleep
- More granular control needed

#### 2. Memory Management

**Linux Kernel:**
- Standard memory management
- OOM (Out-Of-Memory) killer
- Standard page cache
- Generic memory allocators

**Android Kernel:**
- **Low Memory Killer (LMK):** Android-specific OOM
- **ashmem:** Android shared memory
- **ION:** Android memory allocator
- **Pmem:** Physical memory allocator (legacy)

**Why Different:**
- Mobile devices have limited RAM
- Need aggressive memory management
- Graphics need special memory
- Media processing requirements

#### 3. Binder IPC

**Linux Kernel:**
- Standard IPC mechanisms
- Sockets, pipes, shared memory
- No Binder driver

**Android Kernel:**
- **Binder Driver:** Android IPC mechanism
- **Binder Protocol:** Android-specific IPC
- **Binder Threads:** Dedicated IPC threads
- **Binder Security:** Android security integration

**Why Different:**
- Android needs efficient IPC
- Object-oriented IPC
- Security requirements
- Performance needs

#### 4. Logger System

**Linux Kernel:**
- Standard kernel logging
- printk, dmesg
- syslog
- Generic logging

**Android Kernel:**
- **Logger Driver:** Android logging system
- **Log Buffers:** Separate buffers (main, system, radio, events)
- **Logcat Integration:** Android logcat tool
- **Structured Logging:** Android log format

**Why Different:**
- Mobile devices need structured logging
- Multiple log streams
- Integration with Android tools
- Better debugging

#### 5. Alarm System

**Linux Kernel:**
- Standard RTC (Real-Time Clock) alarms
- Basic alarm functionality
- Limited features

**Android Kernel:**
- **Alarm Driver:** Android alarm system
- **Multiple Alarm Types:** RTC, ELAPSED_REALTIME, etc.
- **Wakeup Alarms:** Can wake from sleep
- **Android Integration:** Integrated with Android framework

**Why Different:**
- Apps need reliable alarms
- Wake device from sleep
- Multiple alarm types
- Better power management

#### 6. Paranoid Networking

**Linux Kernel:**
- Standard networking
- No per-UID restrictions
- Generic network stack

**Android Kernel:**
- **Paranoid Networking:** Per-UID network access
- **Network Security:** UID-based restrictions
- **Android Integration:** Framework integration
- **Permission-Based:** Network permissions

**Why Different:**
- Security requirements
- App isolation
- Permission system
- Network access control

### Android-Specific Drivers

#### Binder Driver

**Purpose:**
Provides Android's IPC mechanism.

**Features:**
- Object references
- Transaction support
- Security integration
- Performance optimized

**Location:**
- `drivers/android/binder.c`
- Android-specific
- Not in mainline Linux
- Critical for Android

#### ashmem Driver

**Purpose:**
Android shared memory allocator.

**Features:**
- Shared memory
- Pin/unpin support
- Android-specific
- Graphics integration

**Location:**
- `drivers/staging/android/ashmem.c`
- Android-specific
- Used by graphics
- Media processing

#### ION Memory Allocator

**Purpose:**
Unified memory allocator for Android.

**Features:**
- Graphics memory
- Media buffers
- Camera buffers
- Unified interface

**Location:**
- `drivers/staging/android/ion/`
- Android-specific
- Replaces pmem
- Modern allocator

#### Logger Driver

**Purpose:**
Android logging system.

**Features:**
- Multiple log buffers
- Structured logging
- Android integration
- Performance optimized

**Location:**
- `drivers/staging/android/logger.c`
- Android-specific
- Logcat integration
- Debugging support

### Kernel Configuration Differences

#### Android-Specific Options

**CONFIG_ANDROID:**
- Enables Android features
- Android drivers
- Android subsystems
- Base Android support

**CONFIG_ANDROID_BINDER_IPC:**
- Binder driver
- Android IPC
- Required for Android
- Core feature

**CONFIG_ANDROID_LOGGER:**
- Logger driver
- Android logging
- Logcat support
- Debugging

**CONFIG_ASHMEM:**
- ashmem driver
- Shared memory
- Graphics support
- Media processing

#### Modified Subsystems

**Power Management:**
- Wakelock support
- Early suspend
- Wakeup sources
- Android PM framework

**Memory Management:**
- Low Memory Killer
- ION allocator
- ashmem support
- Android memory model

**Scheduling:**
- Android scheduler tweaks
- Interactive governor
- CPU frequency scaling
- Performance tuning

### Development Model Differences

#### Mainline Linux

**Development:**
- Mainline Linux development
- Community-driven
- Upstream focus
- Standard process

**Release Model:**
- Regular releases
- LTS versions
- Mainline focus
- Community releases

#### Android Kernel

**Development:**
- Android-specific development
- Google-led
- Android focus
- Separate patches

**Release Model:**
- Android version releases
- Device-specific kernels
- Vendor modifications
- Fragmented versions

### Compatibility and Porting

#### Linux Compatibility

**Maintained:**
- Linux API compatibility
- Kernel module support
- Driver compatibility
- System call compatibility

**Limitations:**
- Some features differ
- Android-specific behavior
- Modified subsystems
- Extended functionality

#### Porting Considerations

**From Linux to Android:**
- Add Android drivers
- Enable Android features
- Configure Android options
- Test Android integration

**From Android to Linux:**
- Remove Android-specific code
- Replace Android drivers
- Use standard Linux features
- Test Linux compatibility

### Version Management

#### Linux Kernel Versions

**Tracking:**
- Android tracks Linux versions
- Usually LTS versions
- Version numbers match Linux
- Android patches on top

**Examples:**
- Android 12: Linux 5.4, 5.10
- Android 13: Linux 5.10, 5.15
- Android 14: Linux 5.15, 6.1
- Varies by device

#### Android Kernel Versions

**Versioning:**
- Based on Linux version
- Android-specific patches
- Device-specific versions
- Vendor modifications

**Fragmentation:**
- Different devices, different versions
- Vendor customizations
- Various Linux base versions
- Update challenges

### Key Android Kernel Features

#### Wakelocks

**Purpose:**
Prevent system from entering sleep.

**Implementation:**
- Kernel wakelock API
- User-space wakelocks
- Wakeup sources
- Power management integration

**Why Important:**
- Apps need to prevent sleep
- Background operations
- Network operations
- Battery management

#### Low Memory Killer

**Purpose:**
Aggressively manage memory on mobile devices.

**Implementation:**
- OOM score adjustments
- Process killing
- Memory pressure handling
- Android integration

**Why Important:**
- Limited mobile RAM
- Aggressive memory management
- System stability
- Performance

#### Binder IPC

**Purpose:**
Efficient inter-process communication.

**Implementation:**
- Binder driver
- Object references
- Transaction support
- Security integration

**Why Important:**
- Core Android IPC
- Service communication
- App-to-framework communication
- Performance critical

### Best Practices

#### Understanding Differences

**Learn Both:**
- Understand Linux kernel
- Learn Android modifications
- Know Android features
- Understand integration

**Development:**
- Use Android features appropriately
- Maintain Linux compatibility
- Follow Android conventions
- Test thoroughly

## Key Takeaways

1. **Android kernel is based on Linux** but includes significant Android-specific modifications and features.

2. **Key differences include** power management (wakelocks), memory management (LMK, ION), Binder IPC, logger system, and alarm system.

3. **Android-specific drivers** like Binder, ashmem, ION, and Logger are not in mainline Linux and are Android-only.

4. **Power management is heavily modified** with wakelocks, early suspend, and wakeup sources for mobile device optimization.

5. **Memory management includes** Low Memory Killer, ION allocator, and ashmem for mobile device constraints.

6. **Binder IPC is Android's core IPC mechanism** and is not present in standard Linux kernels.

7. **Android kernel maintains Linux compatibility** but extends functionality significantly for mobile device requirements.

8. **Understanding the differences** is essential for AOSP development, kernel porting, and Android system customization.

## Related Topics

- **Android Architecture - Complete Overview:** How the kernel fits into Android architecture
- **Boot Process Overview:** How the Android kernel boots the system
- **Binder IPC Basics:** The Android IPC mechanism provided by the kernel
- **Wakelocks:** Android-specific power management feature

