---
number: 29
title: AOSP Repo Structure
slug: aosp-repo-structure
level: beginner
tags:
  - aosp
  - repo
  - structure
  - directory
  - organization
  - source-code
prerequisites:
  - build-system-structure
  - android-architecture-complete-overview
estimated_minutes: 75
contributors: []
diagrams: []
examples: []
canonical_id: aosp-beginner-29
---

# AOSP Repo Structure

## Overview

The AOSP (Android Open Source Project) source code is organized into a well-structured directory tree that separates different components, layers, and concerns. Understanding the AOSP repo structure is essential for navigating the codebase, finding relevant code, and understanding how Android is organized. This guide provides a comprehensive overview of the AOSP directory structure, explaining what each major directory contains and how the codebase is organized.

Think of the AOSP repo structure like a well-organized library: books (source code) are organized by subject (component type), with clear sections (directories) for different topics (frameworks, hardware, apps, etc.). Just as you'd go to the "Science" section for science books, you'd go to `frameworks/` for framework code or `hardware/` for hardware-related code.

## Deep Explanation

### What is AOSP Repo Structure?

The AOSP repo structure is the organization of Android source code into directories, with each directory containing related components. This structure makes it easy to find code, understand relationships, and navigate the large codebase.

**Key Characteristics:**
- **Hierarchical:** Organized in a tree structure
- **Logical:** Related code grouped together
- **Scalable:** Handles large codebase
- **Standardized:** Consistent across AOSP

**Why This Structure?**
- **Navigation:** Easy to find code
- **Organization:** Logical grouping
- **Maintenance:** Easier to maintain
- **Understanding:** Clear component boundaries

### Top-Level Directory Overview

The AOSP source tree has several top-level directories, each serving a specific purpose:

#### build/

**Purpose:**
Core build system files and configuration.

**Contents:**
- Build system core logic
- Make and Soong definitions
- Build tools and scripts
- Common build rules
- Build configuration files

**Key Files:**
- `build/make/core/` - Core Make build system
- `build/soong/` - Soong build system
- `build/envsetup.sh` - Build environment setup
- `build/target/` - Target-specific build configs

**Why It Matters:**
- Defines how everything builds
- Contains build system logic
- Provides build tools
- Essential for compilation

#### frameworks/

**Purpose:**
Android framework code and system services.

**Contents:**
- Framework APIs
- System services
- Framework libraries
- Core Android functionality

**Key Subdirectories:**
- `frameworks/base/` - Core framework
- `frameworks/native/` - Native framework
- `frameworks/av/` - Audio/Video framework
- `frameworks/rs/` - RenderScript

**Why It Matters:**
- Core Android functionality
- System services
- Framework APIs
- Application framework

#### packages/

**Purpose:**
System applications and pre-installed apps.

**Contents:**
- System applications
- Pre-installed apps
- System UI components
- Default Android apps

**Key Subdirectories:**
- `packages/apps/` - System apps
- `packages/services/` - System services
- `packages/providers/` - Content providers
- `packages/wallpapers/` - Wallpapers

**Why It Matters:**
- User-facing applications
- System UI
- Default apps
- System functionality

#### system/

**Purpose:**
Core system components and native daemons.

**Contents:**
- Core system utilities
- Native daemons
- System libraries
- Core system functionality

**Key Subdirectories:**
- `system/core/` - Core system utilities
- `system/vold/` - Volume daemon
- `system/netd/` - Network daemon
- `system/logd/` - Logging daemon

**Why It Matters:**
- Core system functionality
- Native system components
- System daemons
- Low-level utilities

#### hardware/

**Purpose:**
Hardware abstraction layers and hardware interfaces.

**Contents:**
- HAL implementations
- Hardware interfaces
- Hardware-specific code
- Vendor HALs

**Key Subdirectories:**
- `hardware/libhardware/` - HAL library
- `hardware/interfaces/` - HAL interfaces
- `hardware/qcom/` - Qualcomm HALs
- `hardware/broadcom/` - Broadcom HALs

**Why It Matters:**
- Hardware abstraction
- HAL implementations
- Hardware interfaces
- Vendor code

#### device/

**Purpose:**
Device-specific configurations and code.

**Contents:**
- Device configurations
- Board configurations
- Device-specific code
- Hardware configurations

**Key Structure:**
- `device/<vendor>/<device>/` - Device-specific
- Product configurations
- Board configurations
- Device makefiles

**Why It Matters:**
- Device customization
- Hardware configuration
- Product definitions
- Device-specific code

#### vendor/

**Purpose:**
Vendor-specific code and proprietary components.

**Contents:**
- Vendor code
- Proprietary components
- Vendor customizations
- OEM-specific code

**Key Structure:**
- `vendor/<vendor>/` - Vendor code
- Proprietary binaries
- Vendor configurations
- OEM customizations

**Why It Matters:**
- Vendor customizations
- Proprietary code
- OEM features
- Vendor-specific functionality

### Detailed Directory Structure

#### frameworks/base/

**Purpose:**
Core Android framework.

**Contents:**
- ActivityManager
- WindowManager
- PackageManager
- System services
- Framework APIs

**Key Subdirectories:**
- `core/` - Core framework
- `services/` - System services
- `graphics/` - Graphics framework
- `media/` - Media framework

**Size:**
- Largest framework directory
- Most framework code
- Core Android functionality

#### packages/apps/

**Purpose:**
System applications.

**Contents:**
- Launcher
- Settings
- SystemUI
- Dialer
- Camera
- And many more...

**Key Apps:**
- `Settings/` - Settings app
- `Launcher3/` - Launcher
- `SystemUI/` - System UI
- `Dialer/` - Phone app

**Why It Matters:**
- User-facing apps
- System functionality
- Default apps
- Core applications

#### system/core/

**Purpose:**
Core system utilities and daemons.

**Contents:**
- init (system initialization)
- logd (logging daemon)
- adb (Android Debug Bridge)
- Core utilities

**Key Components:**
- `init/` - Init system
- `logd/` - Logging
- `adb/` - Debug bridge
- `libcutils/` - C utilities

**Why It Matters:**
- Core system functionality
- System initialization
- Essential utilities
- Low-level components

### Build Output Directories

#### out/

**Purpose:**
Build output directory.

**Contents:**
- Compiled objects
- Generated files
- Final images
- Build artifacts

**Structure:**
- `out/target/` - Target outputs
- `out/host/` - Host tools
- `out/soong/` - Soong outputs

**Why It Matters:**
- Build results
- Generated files
- Final images
- Build artifacts

#### out/target/product/

**Purpose:**
Device-specific build outputs.

**Contents:**
- System images
- OTA packages
- Installable files
- Device-specific outputs

**Structure:**
- `out/target/product/<device>/` - Device outputs
- `system.img` - System partition
- `boot.img` - Boot partition
- `userdata.img` - User data partition

**Why It Matters:**
- Final build outputs
- Flashable images
- Installable packages
- Device-specific files

### Special Directories

#### prebuilts/

**Purpose:**
Prebuilt binaries and tools.

**Contents:**
- Prebuilt toolchains
- Prebuilt libraries
- Development tools
- Third-party binaries

**Key Subdirectories:**
- `prebuilts/gcc/` - GCC toolchains
- `prebuilts/clang/` - Clang toolchains
- `prebuilts/sdk/` - SDK tools
- `prebuilts/ndk/` - NDK tools

**Why It Matters:**
- Build tools
- Toolchains
- Development tools
- Prebuilt components

#### external/

**Purpose:**
External open-source projects.

**Contents:**
- Third-party libraries
- Open-source projects
- External dependencies
- Upstream projects

**Key Examples:**
- `external/zlib/` - zlib library
- `external/openssl/` - OpenSSL
- `external/libpng/` - libpng
- Many more...

**Why It Matters:**
- External dependencies
- Third-party code
- Open-source components
- Upstream projects

#### bionic/

**Purpose:**
Android's C library (Bionic).

**Contents:**
- C standard library
- Math library
- Linker
- System calls

**Key Components:**
- `libc/` - C library
- `libm/` - Math library
- `linker/` - Dynamic linker

**Why It Matters:**
- C library implementation
- System calls
- Low-level functionality
- Native code foundation

### Code Organization Principles

#### Separation of Concerns

**Principle:**
Different types of code in different directories.

**Examples:**
- Framework code in `frameworks/`
- Apps in `packages/apps/`
- Hardware in `hardware/`
- System in `system/`

**Benefits:**
- Clear boundaries
- Easy navigation
- Logical organization
- Maintainable structure

#### Layered Architecture

**Principle:**
Code organized by architectural layers.

**Layers:**
- Applications (top)
- Framework (middle)
- Native (lower)
- Kernel (bottom)

**Reflection:**
- Directory structure reflects architecture
- Clear layer boundaries
- Logical organization

#### Component-Based

**Principle:**
Related code grouped together.

**Examples:**
- Each app in its directory
- Each service in its directory
- Each library in its directory

**Benefits:**
- Easy to find code
- Clear component boundaries
- Maintainable
- Scalable

### Navigation Tips

#### Finding Code

**By Component Type:**
- Framework code → `frameworks/`
- Apps → `packages/apps/`
- System services → `frameworks/base/services/`
- HALs → `hardware/`

**By Functionality:**
- Graphics → `frameworks/base/graphics/`
- Media → `frameworks/av/`
- Network → `system/netd/`
- Storage → `system/vold/`

**By Device:**
- Device config → `device/<vendor>/<device>/`
- Vendor code → `vendor/<vendor>/`

#### Common Paths

**Framework:**
- `frameworks/base/core/java/` - Core Java framework
- `frameworks/base/services/` - System services
- `frameworks/native/` - Native framework

**Apps:**
- `packages/apps/Settings/` - Settings app
- `packages/apps/Launcher3/` - Launcher
- `packages/apps/SystemUI/` - System UI

**System:**
- `system/core/init/` - Init system
- `system/core/adb/` - ADB
- `system/vold/` - Volume daemon

### Repo Tool Integration

#### What is Repo?

Repo is a tool that manages multiple Git repositories.

**Purpose:**
- Manages AOSP's many Git repos
- Synchronizes code
- Handles dependencies
- Simplifies workflow

**Manifest:**
- `.repo/manifests/` - Manifest files
- Defines repositories
- Specifies versions
- Manages branches

#### Repo Structure

**Manifest Files:**
- `default.xml` - Default manifest
- Device-specific manifests
- Version-specific manifests

**Repo Directories:**
- `.repo/` - Repo metadata
- `.repo/manifests/` - Manifest files
- `.repo/projects/` - Git repositories

### Directory Size and Scale

#### Large Directories

**frameworks/base/:**
- Largest directory
- Most framework code
- Core Android functionality
- Millions of lines of code

**packages/apps/:**
- Many applications
- System apps
- User apps
- Large codebase

**external/:**
- Many external projects
- Third-party code
- Dependencies
- Large collection

#### Code Statistics

**Total Size:**
- Millions of lines of code
- Thousands of files
- Hundreds of directories
- Large codebase

**Languages:**
- Java (framework)
- C/C++ (native)
- Kotlin (apps)
- Many others

### Best Practices

#### Code Organization

**Follow Structure:**
- Put code in appropriate directories
- Follow naming conventions
- Maintain organization
- Keep structure clean

**Naming:**
- Use clear names
- Follow conventions
- Be descriptive
- Avoid conflicts

#### Navigation

**Use Tools:**
- IDE navigation
- Search tools
- Documentation
- Code browsers

**Learn Structure:**
- Understand organization
- Know key directories
- Learn common paths
- Practice navigation

## Key Takeaways

1. **AOSP repo structure** organizes Android source code into logical directories based on component type and functionality.

2. **Top-level directories** like `frameworks/`, `packages/`, `system/`, and `hardware/` separate different types of code.

3. **frameworks/** contains the Android framework code, system services, and core Android functionality.

4. **packages/apps/** contains system applications and pre-installed apps that users interact with.

5. **system/** contains core system components, native daemons, and low-level utilities.

6. **device/** and **vendor/** contain device-specific and vendor-specific code for customization.

7. **out/** contains build outputs including compiled objects, generated files, and final system images.

8. **Understanding the repo structure** is essential for navigating the AOSP codebase, finding relevant code, and understanding how Android is organized.

## Related Topics

- **Build System Structure:** How the build system uses the repo structure
- **lunch & lunch combos:** How to configure builds using the repo structure
- **device/ vendor/ directory structure:** Detailed look at device and vendor directories
- **Android Architecture - Complete Overview:** How the architecture relates to the repo structure

