---
number: 32
title: device/ vendor/ directory structure
slug: device-vendor-directory-structure
level: beginner
tags:
  - aosp
  - device
  - vendor
  - directory
  - structure
  - configuration
  - customization
prerequisites:
  - aosp-repo-structure
  - boardconfig
  - lunch-lunch-combos
estimated_minutes: 80
contributors: []
diagrams: []
examples: []
canonical_id: aosp-beginner-32
---

# device/ vendor/ directory structure

## Overview

The `device/` and `vendor/` directories are critical parts of the AOSP source tree that contain device-specific and vendor-specific code, configurations, and customizations. Understanding these directory structures is essential for AOSP development, device porting, OEM customization, and understanding how Android is customized for specific hardware and vendors. This guide provides a comprehensive overview of the device/ and vendor/ directory structures, their organization, key files, and how they're used in the build system.

Think of the `device/` and `vendor/` directories like custom parts warehouses: the `device/` directory contains the blueprints and specifications for building a device (like device schematics), while the `vendor/` directory contains the proprietary parts and customizations that vendors add (like branded components). Together, they transform generic AOSP into a device-specific Android build.

## Deep Explanation

### What are device/ and vendor/?

The `device/` and `vendor/` directories contain device-specific and vendor-specific code and configurations that customize AOSP for particular hardware and vendors.

**Key Characteristics:**
- **device/:** Device-specific configurations and code
- **vendor/:** Vendor-specific code and proprietary components
- **Customization:** Allow OEM/vendor customizations
- **Required:** Essential for device builds

**Why Separate Directories?**
- **Separation:** Clear separation of concerns
- **Organization:** Logical code organization
- **Maintenance:** Easier to maintain
- **Licensing:** Proprietary code separation

### device/ Directory Structure

#### Top-Level Organization

**Directory Structure:**
```
device/
├── <vendor>/
│   ├── <device>/
│   │   ├── AndroidProducts.mk
│   │   ├── BoardConfig.mk
│   │   ├── device.mk
│   │   ├── Android.mk
│   │   └── ...
│   └── common/
│       └── ...
```

**Organization:**
- By vendor (manufacturer)
- Then by device
- Common configurations shared
- Device-specific isolated

#### device/<vendor>/<device>/

**Purpose:**
Device-specific configuration and code.

**Key Files:**
- `AndroidProducts.mk` - Product registration
- `BoardConfig.mk` - Hardware configuration
- `device.mk` - Product definition
- `Android.mk` - Build rules (legacy)

**Structure:**
```
device/vendor/device/
├── AndroidProducts.mk    # Product registration
├── BoardConfig.mk         # Hardware config
├── device.mk              # Product definition
├── Android.mk             # Build rules (legacy)
├── init/                  # Init scripts
├── sepolicy/              # SELinux policy
├── overlay/               # Resource overlays
└── ...
```

#### AndroidProducts.mk

**Purpose:**
Registers products for the device.

**Content:**
```makefile
PRODUCT_MAKEFILES := \
    $(LOCAL_DIR)/device.mk \
    $(LOCAL_DIR)/device_64.mk
```

**Function:**
- Lists product makefiles
- Makes products available to lunch
- Defines product variants
- Required for product selection

#### device.mk

**Purpose:**
Defines the product configuration.

**Content:**
```makefile
# Product name
PRODUCT_NAME := mydevice
PRODUCT_DEVICE := mydevice
PRODUCT_BRAND := vendor
PRODUCT_MODEL := My Device

# Product packages
PRODUCT_PACKAGES += \
    MyApp \
    MyService

# Product properties
PRODUCT_PROPERTY_OVERRIDES += \
    ro.config.feature=true
```

**Function:**
- Defines product identity
- Lists included apps
- Sets system properties
- Configures product features

#### BoardConfig.mk

**Purpose:**
Hardware-specific configuration.

**Content:**
```makefile
# Architecture
TARGET_ARCH := arm64
TARGET_ARCH_VARIANT := armv8-a

# Partitions
BOARD_BOOTIMAGE_PARTITION_SIZE := 67108864
BOARD_SYSTEMIMAGE_PARTITION_SIZE := 3221225472
```

**Function:**
- Defines hardware settings
- Configures partitions
- Sets kernel configuration
- Hardware-specific settings

#### Other Common Files

**init/ Directory:**
- Device-specific init scripts
- Hardware initialization
- Device-specific services
- Custom init actions

**sepolicy/ Directory:**
- Device-specific SELinux policy
- Custom security rules
- Device-specific permissions
- Security customizations

**overlay/ Directory:**
- Resource overlays
- UI customizations
- Theme modifications
- Branding resources

### vendor/ Directory Structure

#### Top-Level Organization

**Directory Structure:**
```
vendor/
├── <vendor>/
│   ├── products/
│   │   └── <product>.mk
│   ├── proprietary/
│   │   └── ...
│   ├── apps/
│   │   └── ...
│   └── ...
```

**Organization:**
- By vendor
- Products, apps, proprietary code
- Vendor-specific organization
- Flexible structure

#### vendor/<vendor>/products/

**Purpose:**
Vendor product definitions.

**Content:**
```makefile
# Product definition
PRODUCT_NAME := vendor_product
PRODUCT_DEVICE := device
PRODUCT_BRAND := vendor

# Vendor packages
PRODUCT_PACKAGES += \
    VendorApp \
    VendorService
```

**Function:**
- Defines vendor products
- Lists vendor apps
- Vendor-specific configuration
- Product customization

#### vendor/<vendor>/proprietary/

**Purpose:**
Proprietary binaries and libraries.

**Contents:**
- Proprietary libraries (.so files)
- Proprietary binaries
- Vendor-specific code
- Closed-source components

**Structure:**
```
vendor/vendor/proprietary/
├── lib/
│   └── *.so
├── bin/
│   └── *
└── ...
```

**Function:**
- Stores proprietary code
- Vendor-specific binaries
- Closed-source components
- Hardware-specific code

#### vendor/<vendor>/apps/

**Purpose:**
Vendor applications.

**Contents:**
- Vendor-developed apps
- OEM applications
- Custom applications
- Vendor-specific apps

**Structure:**
```
vendor/vendor/apps/
├── VendorApp1/
├── VendorApp2/
└── ...
```

**Function:**
- Vendor applications
- OEM customizations
- Custom functionality
- Vendor features

### device/ vs vendor/ Comparison

#### device/ Directory

**Purpose:**
Device-specific configuration.

**Contents:**
- Device configurations
- Hardware settings
- Device makefiles
- Device-specific code

**Characteristics:**
- Open source (usually)
- Device-specific
- Configuration-focused
- Build system integration

**Use Cases:**
- Device porting
- Hardware configuration
- Device customization
- Build configuration

#### vendor/ Directory

**Purpose:**
Vendor-specific code and components.

**Contents:**
- Proprietary code
- Vendor apps
- Vendor services
- OEM customizations

**Characteristics:**
- Proprietary (often)
- Vendor-specific
- Code-focused
- Flexible structure

**Use Cases:**
- Vendor customizations
- Proprietary components
- OEM features
- Vendor applications

### Key Files and Their Purposes

#### Product Files

**AndroidProducts.mk:**
- Registers products
- Makes products available
- Defines product list
- Required for lunch

**device.mk / product.mk:**
- Defines product
- Lists packages
- Sets properties
- Configures product

#### Configuration Files

**BoardConfig.mk:**
- Hardware configuration
- Architecture settings
- Partition sizes
- Kernel configuration

**Android.mk:**
- Build rules (legacy)
- Module definitions
- Build configuration
- Being replaced by Android.bp

#### Other Files

**init.rc / init.<device>.rc:**
- Init scripts
- Service definitions
- Device initialization
- Custom services

**sepolicy/**:
- SELinux policy
- Security rules
- Device permissions
- Custom policies

### Directory Organization Patterns

#### Vendor Organization

**Pattern 1: By Device**
```
vendor/vendor/
├── device1/
├── device2/
└── common/
```

**Pattern 2: By Component**
```
vendor/vendor/
├── products/
├── apps/
├── proprietary/
└── services/
```

**Pattern 3: Hybrid**
```
vendor/vendor/
├── products/
│   ├── device1/
│   └── device2/
├── apps/
└── proprietary/
```

#### Device Organization

**Standard Structure:**
```
device/vendor/device/
├── AndroidProducts.mk
├── BoardConfig.mk
├── device.mk
├── init/
├── sepolicy/
└── overlay/
```

**Extended Structure:**
```
device/vendor/device/
├── AndroidProducts.mk
├── BoardConfig.mk
├── device.mk
├── kernel/          # Kernel source (if in-tree)
├── dtb/             # Device tree
├── firmware/        # Firmware files
└── ...
```

### Build System Integration

#### How device/ is Used

**Build Process:**
1. lunch selects product
2. Build system loads device.mk
3. Loads BoardConfig.mk
4. Applies device configuration
5. Builds device-specific code

**Integration Points:**
- Product selection (lunch)
- Build configuration
- Image creation
- Device customization

#### How vendor/ is Used

**Build Process:**
1. Build system scans vendor/
2. Finds vendor products
3. Loads vendor makefiles
4. Includes vendor packages
5. Builds vendor components

**Integration Points:**
- Product definitions
- Package inclusion
- Proprietary binaries
- Vendor apps

### Common Patterns

#### Device Porting

**New Device Setup:**
1. Create `device/vendor/device/`
2. Create AndroidProducts.mk
3. Create BoardConfig.mk
4. Create device.mk
5. Configure hardware
6. Test build

#### Vendor Customization

**Vendor Setup:**
1. Create `vendor/vendor/`
2. Create product definitions
3. Add vendor apps
4. Include proprietary code
5. Configure vendor features

### Best Practices

#### Organization

**Clear Structure:**
- Use consistent naming
- Organize logically
- Group related files
- Document structure

**Naming Conventions:**
- Use vendor name
- Use device name
- Be descriptive
- Follow conventions

#### Maintenance

**Keep Organized:**
- Regular cleanup
- Remove unused files
- Update configurations
- Maintain documentation

**Version Control:**
- Track changes
- Document modifications
- Maintain history
- Tag releases

## Key Takeaways

1. **device/ directory** contains device-specific configurations and code for customizing AOSP for specific hardware.

2. **vendor/ directory** contains vendor-specific code, proprietary components, and OEM customizations.

3. **Key files in device/** include AndroidProducts.mk (product registration), BoardConfig.mk (hardware config), and device.mk (product definition).

4. **device/ structure** is organized by vendor, then by device, with common configurations shared.

5. **vendor/ structure** is more flexible, organized by vendor with products, apps, and proprietary code.

6. **device/ focuses on configuration** while vendor/ focuses on code and proprietary components.

7. **Both directories are essential** for building Android for specific devices and vendors.

8. **Understanding device/ and vendor/ structures** is essential for device porting, OEM customization, and AOSP development.

## Related Topics

- **BoardConfig:** Hardware configuration files in device/ directories
- **AOSP Repo Structure:** How device/ and vendor/ fit into the overall structure
- **lunch & lunch combos:** How device/ and vendor/ products are selected
- **Build System Structure:** How device/ and vendor/ integrate with the build system

