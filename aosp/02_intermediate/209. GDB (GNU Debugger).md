---
number: 209
title: GDB (GNU Debugger)
slug: gdb-gnu-debugger
level: intermediate
tags:
  - aosp
  - gdb
  - gnu-debugger
  - debugging
  - native-debugging
  - development-tools
prerequisites:
  - android-architecture-complete-overview
  - gdbserver-for-native-debugging
estimated_minutes: 95
contributors: []
diagrams: []
examples: []
canonical_id: aosp-intermediate-209
---

# GDB (GNU Debugger)

## Overview

GDB (GNU Debugger) is a powerful command-line debugger for native code that allows developers to debug programs, inspect memory, analyze crashes, set breakpoints, and step through code execution. Understanding GDB is essential for AOSP development, as it explains how to use GDB for native debugging, how to analyze crashes, how to inspect memory and variables, how to set breakpoints, and how GDB provides comprehensive debugging capabilities for native code. This guide provides a comprehensive overview of GDB, tool usage, debugging commands, crash analysis, memory inspection, breakpoint management, and best practices.

Think of GDB like a surgical tool for code: just as a surgeon uses precise tools to examine, diagnose, and fix problems in the human body, GDB uses precise commands to examine, diagnose, and fix problems in code. It allows you to "operate" on running programs, inspect their internal state, and understand exactly what's happening at each step of execution.

## Deep Explanation

### What is GDB?

GDB (GNU Debugger) is a command-line debugger for native code that allows developers to debug programs, inspect memory, analyze crashes, set breakpoints, step through code, and understand program behavior at a low level.

**Key Characteristics:**
- **Command-Line Debugger:** Command-line interface
- **Native Code:** Debugs native C/C++ code
- **Low-Level:** Low-level debugging capabilities
- **Comprehensive:** Comprehensive debugging features
- **Essential Tool:** Essential for native debugging

**Why GDB?**
- **Native Debugging:** Essential for native code debugging
- **Crash Analysis:** Analyze crashes and core dumps
- **Memory Inspection:** Inspect memory and variables
- **Step-Through Debugging:** Step through code execution
- **Development Tool:** Essential development tool

### GDB Architecture

#### Debugger Components

**GDB Components:**
- Debugger core
- Symbol loader
- Breakpoint manager
- Memory inspector
- Execution controller

**Component Characteristics:**
- Modular architecture
- Symbol support
- Breakpoint management
- Memory access
- Execution control

#### Debugging Modes

**Debugging Modes:**
- **Local Debugging:** Debug local processes
- **Remote Debugging:** Debug remote processes (via gdbserver)
- **Core Dump Analysis:** Analyze core dumps
- **Post-Mortem Debugging:** Debug after crash

**Mode Characteristics:**
- Multiple debugging modes
- Process attachment
- Core dump support
- Remote debugging
- Flexible usage

### GDB Basic Usage

#### Starting GDB

**Starting GDB:**
```bash
# Start GDB
gdb

# Start GDB with program
gdb program

# Start GDB with core dump
gdb program core

# Start GDB with PID
gdb -p <pid>
```

**Start Characteristics:**
- Interactive mode
- Program loading
- Core dump loading
- Process attachment
- Command-line interface

#### Loading Programs

**Loading Programs:**
```gdb
# Load program
(gdb) file program

# Load with symbols
(gdb) file /path/to/program

# Reload program
(gdb) file

# Show loaded program
(gdb) info files
```

**Loading Characteristics:**
- Program loading
- Symbol loading
- File information
- Reload capability
- Symbol resolution

### GDB Commands

#### Execution Control

**Execution Commands:**
```gdb
# Run program
(gdb) run
(gdb) r

# Run with arguments
(gdb) run arg1 arg2

# Continue execution
(gdb) continue
(gdb) c

# Step into function
(gdb) step
(gdb) s

# Step over function
(gdb) next
(gdb) n

# Finish current function
(gdb) finish

# Interrupt execution
(gdb) interrupt
Ctrl+C
```

**Control Characteristics:**
- Program execution
- Step control
- Continue/resume
- Interrupt capability
- Argument passing

#### Breakpoint Management

**Breakpoint Commands:**
```gdb
# Set breakpoint
(gdb) break function_name
(gdb) break file.c:123
(gdb) break *0x12345678

# Set conditional breakpoint
(gdb) break function_name if condition

# List breakpoints
(gdb) info breakpoints
(gdb) info b

# Delete breakpoint
(gdb) delete 1
(gdb) delete

# Enable/disable breakpoint
(gdb) disable 1
(gdb) enable 1

# Clear breakpoint
(gdb) clear function_name
(gdb) clear file.c:123
```

**Breakpoint Characteristics:**
- Multiple breakpoint types
- Conditional breakpoints
- Breakpoint management
- Enable/disable control
- Location flexibility

#### Variable Inspection

**Inspection Commands:**
```gdb
# Print variable
(gdb) print variable_name
(gdb) p variable_name

# Print with format
(gdb) print/x variable_name  # hex
(gdb) print/d variable_name  # decimal
(gdb) print/t variable_name  # binary
(gdb) print/o variable_name  # octal

# Print array
(gdb) print array[0]@10

# Print structure
(gdb) print *struct_ptr

# Print all locals
(gdb) info locals

# Print arguments
(gdb) info args

# Print registers
(gdb) info registers
```

**Inspection Characteristics:**
- Variable printing
- Format options
- Structure inspection
- Register access
- Local/argument access

#### Memory Inspection

**Memory Commands:**
```gdb
# Examine memory
(gdb) x/10x 0x12345678  # 10 hex words
(gdb) x/10d 0x12345678  # 10 decimal words
(gdb) x/10i 0x12345678  # 10 instructions
(gdb) x/10s 0x12345678  # 10 strings

# Memory format
# x = hex, d = decimal, i = instruction, s = string
# /10 = count, x = hex format

# Print memory address
(gdb) print &variable

# Print memory value
(gdb) print *pointer
```

**Memory Characteristics:**
- Memory examination
- Multiple formats
- Address inspection
- Pointer dereferencing
- Instruction disassembly

#### Stack Analysis

**Stack Commands:**
```gdb
# Backtrace
(gdb) backtrace
(gdb) bt

# Backtrace with arguments
(gdb) backtrace full

# Frame information
(gdb) info frame
(gdb) info f

# Select frame
(gdb) frame 1
(gdb) f 1

# Up/down stack
(gdb) up
(gdb) down

# List stack frames
(gdb) info stack
```

**Stack Characteristics:**
- Stack navigation
- Frame selection
- Frame information
- Argument inspection
- Call chain analysis

### Advanced GDB Features

#### Watchpoints

**Watchpoint Commands:**
```gdb
# Watch variable
(gdb) watch variable_name

# Watch memory address
(gdb) watch *0x12345678

# Watch for write
(gdb) watch variable_name

# Watch for read
(gdb) rwatch variable_name

# Watch for read/write
(gdb) awatch variable_name

# List watchpoints
(gdb) info watchpoints
```

**Watchpoint Characteristics:**
- Variable watching
- Memory watching
- Read/write detection
- Automatic breakpoints
- Change detection

#### Conditional Breakpoints

**Conditional Breakpoints:**
```gdb
# Set conditional breakpoint
(gdb) break function_name if variable == value
(gdb) break file.c:123 if count > 10

# Modify breakpoint condition
(gdb) condition 1 variable == value

# Remove condition
(gdb) condition 1
```

**Conditional Characteristics:**
- Condition evaluation
- Dynamic conditions
- Condition modification
- Flexible conditions
- Expression support

#### Multi-Thread Debugging

**Thread Commands:**
```gdb
# List threads
(gdb) info threads

# Switch thread
(gdb) thread 2
(gdb) t 2

# Apply command to all threads
(gdb) thread apply all bt

# Apply command to specific thread
(gdb) thread apply 2 bt

# Set thread-specific breakpoint
(gdb) break function_name thread 2
```

**Thread Characteristics:**
- Thread management
- Thread switching
- Thread-specific operations
- Multi-thread debugging
- Thread inspection

### Crash Analysis

#### Core Dump Analysis

**Core Dump Analysis:**
```bash
# Load core dump
gdb program core

# Or in GDB
(gdb) core core_file

# Analyze crash
(gdb) bt
(gdb) info registers
(gdb) x/10i $pc
(gdb) info locals
```

**Analysis Characteristics:**
- Core dump loading
- Crash analysis
- Stack trace
- Register inspection
- Memory inspection

#### Tombstone Analysis

**Tombstone Analysis:**
```bash
# Pull tombstone
adb pull /data/tombstones/tombstone_XX

# Analyze with GDB
gdb program
(gdb) core tombstone_XX

# Or use addr2line
addr2line -e program -f <address>
```

**Analysis Characteristics:**
- Tombstone loading
- Address resolution
- Symbol resolution
- Crash analysis
- Android-specific

### Symbol Management

#### Loading Symbols

**Symbol Loading:**
```gdb
# Load binary symbols
(gdb) file program

# Load shared library symbols
(gdb) add-symbol-file /path/to/lib.so 0x<base_address>

# Set symbol search path
(gdb) set solib-search-path /path/to/symbols:/another/path

# Show symbol search path
(gdb) show solib-search-path

# Load all symbols
(gdb) set auto-solib-add on
```

**Symbol Characteristics:**
- Symbol loading
- Library symbols
- Search path configuration
- Automatic loading
- Symbol resolution

#### Source Code Navigation

**Source Navigation:**
```gdb
# List source code
(gdb) list
(gdb) l

# List specific function
(gdb) list function_name

# List specific line
(gdb) list file.c:123

# Set source directory
(gdb) directory /path/to/source

# Add source directory
(gdb) directory /another/source/path

# Show source directories
(gdb) show directories
```

**Navigation Characteristics:**
- Source listing
- Function navigation
- Directory configuration
- Source path setup
- Code viewing

### GDB Scripting

#### Command Files

**Command Files:**
```gdb
# Execute command file
(gdb) source script.gdb

# Or on command line
gdb -x script.gdb program
```

**Script Example:**
```gdb
# script.gdb
file program
break main
run
continue
bt
```

**Scripting Characteristics:**
- Command automation
- Script files
- Batch execution
- Automation support
- Workflow automation

#### Python Scripting

**Python Integration:**
```gdb
# Execute Python
(gdb) python
>print("Hello from Python")
>end

# Python functions
(gdb) python
>def my_function():
>    gdb.execute("bt")
>end

# Use function
(gdb) python my_function()
```

**Python Characteristics:**
- Python integration
- Custom commands
- Automation
- Extensibility
- Advanced scripting

### Best Practices

#### Best Practices

**Best Practices:**
- Use debug builds with symbols
- Set up symbol paths correctly
- Use appropriate breakpoints
- Keep GDB session organized
- Document debugging workflows

**Practice Guidelines:**
- **Debug Builds:** Use debug builds with symbols
- **Symbol Paths:** Set up symbol paths correctly
- **Breakpoints:** Use appropriate breakpoints
- **Organization:** Keep GDB session organized
- **Documentation:** Document debugging workflows

#### Common Use Cases

**Common Use Cases:**
- Native crash debugging
- Memory leak detection
- Performance analysis
- Code flow analysis
- Variable inspection

**Use Case Examples:**
- Crash analysis
- Memory debugging
- Performance profiling
- Code understanding
- Bug fixing

## Key Takeaways

1. **GDB (GNU Debugger)** is a powerful command-line debugger for native code that allows developers to debug programs, inspect memory, analyze crashes, set breakpoints, and step through code execution.

2. **GDB architecture** includes debugger components (debugger core, symbol loader, breakpoint manager, memory inspector, execution controller), debugging modes (local debugging, remote debugging, core dump analysis, post-mortem debugging), and architecture characteristics.

3. **GDB basic usage** includes starting GDB (interactive mode, program loading, core dump loading, process attachment, command-line interface), loading programs (program loading, symbol loading, file information, reload capability, symbol resolution), and usage characteristics.

4. **GDB commands** include execution control (program execution, step control, continue/resume, interrupt capability, argument passing), breakpoint management (multiple breakpoint types, conditional breakpoints, breakpoint management, enable/disable control, location flexibility), variable inspection (variable printing, format options, structure inspection, register access, local/argument access), memory inspection (memory examination, multiple formats, address inspection, pointer dereferencing, instruction disassembly), stack analysis (stack navigation, frame selection, frame information, argument inspection, call chain analysis), and command characteristics.

5. **Advanced GDB features** include watchpoints (variable watching, memory watching, read/write detection, automatic breakpoints, change detection), conditional breakpoints (condition evaluation, dynamic conditions, condition modification, flexible conditions, expression support), multi-thread debugging (thread management, thread switching, thread-specific operations, multi-thread debugging, thread inspection), and advanced characteristics.

6. **Crash analysis** includes core dump analysis (core dump loading, crash analysis, stack trace, register inspection, memory inspection), tombstone analysis (tombstone loading, address resolution, symbol resolution, crash analysis, Android-specific), and analysis characteristics.

7. **Symbol management** includes loading symbols (symbol loading, library symbols, search path configuration, automatic loading, symbol resolution), source code navigation (source listing, function navigation, directory configuration, source path setup, code viewing), and management characteristics.

8. **GDB scripting** includes command files (command automation, script files, batch execution, automation support, workflow automation), Python scripting (Python integration, custom commands, automation, extensibility, advanced scripting), and scripting characteristics.

9. **Best practices** include best practices (use debug builds with symbols, set up symbol paths correctly, use appropriate breakpoints, keep GDB session organized, document debugging workflows), common use cases (native crash debugging, memory leak detection, performance analysis, code flow analysis, variable inspection), and practice guidelines.

10. **Understanding GDB** is essential for AOSP development, enabling native debugging, crash analysis, memory inspection, step-through debugging, code understanding, and proper debugging tool usage.

## Related Topics

- **Android Architecture - Complete Overview:** Architecture details
- **gdbserver for native debugging:** Remote debugging details

