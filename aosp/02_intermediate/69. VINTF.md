---
number: 69
title: VINTF
slug: vintf
level: intermediate
tags:
  - aosp
  - vintf
  - vendor-interface
  - treble
  - manifest
  - compatibility
  - vts
prerequisites:
  - vendor-interface-object
  - aidl-based-hals
  - stability-annotations
estimated_minutes: 85
contributors: []
diagrams: []
examples: []
canonical_id: aosp-intermediate-69
---

# VINTF

## Overview

VINTF (Vendor Interface Object Tree) is the comprehensive framework in Android that manages vendor interfaces, validates compatibility, and ensures that framework and vendor implementations work together correctly. Understanding VINTF is essential for AOSP development, as it's the foundation of Project Treble, validates HAL compatibility, manages vendor manifests, enables framework-vendor communication, and ensures system stability across updates. This guide provides a comprehensive overview of VINTF, its components, manifest management, compatibility checking, and its critical role in Project Treble.

Think of VINTF like a compatibility certification system: just as a certification system ensures that products meet standards and work together correctly, VINTF ensures that vendor HAL implementations meet Android's interface requirements and work correctly with the framework, even as both evolve independently. It validates compatibility, manages interface versions, and provides the infrastructure for framework-vendor communication.

## Deep Explanation

### What is VINTF?

VINTF (Vendor Interface Object Tree) is the framework that manages vendor interfaces in Android, providing manifest management, compatibility validation, runtime HAL discovery, and ensuring framework-vendor interoperability.

**Key Characteristics:**
- **Comprehensive Framework:** Complete vendor interface management
- **Manifest Management:** Device and framework manifests
- **Compatibility Validation:** Ensures framework-vendor compatibility
- **Treble Foundation:** Core of Project Treble

**Why VINTF?**
- **Treble Support:** Enables independent framework/vendor updates
- **Compatibility:** Validates HAL compatibility
- **Standardization:** Consistent interface management
- **Stability:** Ensures system stability

### VINTF Components

#### Manifest Management

**Device Manifest:**
- `/vendor/manifest.xml`
- Describes vendor HALs
- Lists available interfaces
- Version information

**Framework Manifest:**
- `/system/etc/vintf/manifest.xml`
- Describes framework requirements
- Lists required HALs
- Version requirements

**Matrix Manifest:**
- Compatibility matrix
- Defines compatibility rules
- Version relationships
- Compatibility requirements

#### Compatibility Checking

**VINTF Object:**
- Runtime compatibility checking
- Validates manifests
- Checks HAL availability
- Verifies versions

**VTS (Vendor Test Suite):**
- Automated compatibility testing
- Validates VINTF compliance
- Tests HAL implementations
- Ensures compatibility

#### Runtime Discovery

**VIO (Vendor Interface Object):**
- Runtime HAL discovery
- Query vendor capabilities
- List available HALs
- Check versions

### VINTF Manifests

#### Device Manifest

**Location:**
- `/vendor/manifest.xml`
- Vendor-provided
- Describes vendor HALs
- Runtime discovery

**Purpose:**
- Declare available HALs
- Describe interfaces
- List instances
- Version information

**Structure:**
```xml
<manifest version="1.0" type="device">
    <hal format="aidl">
        <name>android.hardware.example</name>
        <version>1</version>
        <fqname>IExample/default</fqname>
    </hal>
    <hal format="hidl">
        <name>android.hardware.legacy</name>
        <version>1.0</version>
        <interface>
            <name>ILegacy</name>
            <instance>default</instance>
        </interface>
    </hal>
</manifest>
```

#### Framework Manifest

**Location:**
- `/system/etc/vintf/manifest.xml`
- Framework-provided
- Describes framework requirements
- Defines required HALs

**Purpose:**
- Declare required HALs
- Specify version requirements
- Define interface needs
- Compatibility requirements

**Structure:**
```xml
<manifest version="1.0" type="framework">
    <hal format="aidl" optional="false">
        <name>android.hardware.example</name>
        <version>1</version>
        <interface>
            <name>IExample</name>
            <instance>default</instance>
        </interface>
    </hal>
</manifest>
```

#### Compatibility Matrix

**Location:**
- `/vendor/compatibility_matrix.xml`
- Defines compatibility rules
- Version relationships
- Requirements

**Purpose:**
- Define compatibility rules
- Specify version requirements
- Validate compatibility
- Ensure interoperability

**Structure:**
```xml
<compatibility-matrix version="1.0" type="framework">
    <hal format="aidl" optional="false">
        <name>android.hardware.example</name>
        <version>1</version>
    </hal>
</compatibility-matrix>
```

### VINTF Compatibility Checking

#### Compatibility Validation

**Check Process:**
```
1. Load device manifest
2. Load framework manifest
3. Load compatibility matrix
4. Validate HAL availability
5. Check version compatibility
6. Verify interface compatibility
```

**Validation Rules:**
- Required HALs must be present
- Versions must be compatible
- Interfaces must match
- Instances must be available

#### Runtime Checking

**VINTF Object API:**
```cpp
#include <vintf/VintfObject.h>

using android::vintf::VintfObject;

// Check compatibility
bool compatible = VintfObject::getInstance()->checkCompatibility();

// Get compatibility info
std::string info = VintfObject::getInstance()->getHalNamesAndVersions();
```

**Framework Usage:**
- Framework checks compatibility at boot
- Validates vendor HALs
- Ensures required interfaces
- Reports compatibility status

### VINTF and Project Treble

#### Treble Architecture

**Project Treble:**
- Separates framework and vendor
- Requires stable interfaces
- Enables independent updates
- Uses VINTF for compatibility

**VINTF's Role:**
- Validates compatibility
- Manages interface versions
- Enables runtime discovery
- Ensures interoperability

#### Framework-Vendor Separation

**Before Treble:**
- Framework and vendor tightly coupled
- Updates required both
- Difficult to update
- Slow security patches

**With Treble/VINTF:**
- Framework and vendor separated
- Independent updates possible
- Faster security patches
- Easier Android version support

### VINTF Manifest Examples

#### AIDL HAL Declaration

**Device Manifest:**
```xml
<manifest version="1.0" type="device">
    <hal format="aidl">
        <name>android.hardware.example</name>
        <version>1</version>
        <fqname>IExample/default</fqname>
    </hal>
</manifest>
```

**Framework Manifest:**
```xml
<manifest version="1.0" type="framework">
    <hal format="aidl" optional="false">
        <name>android.hardware.example</name>
        <version>1</version>
        <interface>
            <name>IExample</name>
            <instance>default</instance>
        </interface>
    </hal>
</manifest>
```

#### HIDL HAL Declaration

**Device Manifest:**
```xml
<manifest version="1.0" type="device">
    <hal format="hidl">
        <name>android.hardware.legacy</name>
        <version>1.0</version>
        <interface>
            <name>ILegacy</name>
            <instance>default</instance>
        </interface>
    </hal>
</manifest>
```

### VINTF Tools and Commands

#### VINTF Command Line

**Check Compatibility:**
```bash
# Check VINTF compatibility
adb shell vintf

# Check specific manifest
adb shell vintf /vendor/manifest.xml
```

**List HALs:**
```bash
# List all HALs
adb shell lshal

# List specific HAL
adb shell lshal | grep example
```

**Dump VINTF Info:**
```bash
# Dump VINTF information
adb shell dumpsys vintf
```

#### VTS Testing

**VTS (Vendor Test Suite):**
- Automated compatibility testing
- Validates VINTF compliance
- Tests HAL implementations
- Ensures compatibility

**VTS Tests:**
- Manifest validation
- HAL availability
- Version compatibility
- Interface correctness

### VINTF Best Practices

#### Manifest Maintenance

**Keep Manifests Updated:**
- Update when HALs change
- Reflect actual capabilities
- Accurate version information
- Complete interface descriptions

**Manifest Validation:**
- Validate against schema
- Check for errors
- Ensure completeness
- Test with VTS

#### Compatibility Management

**Version Compatibility:**
- Follow versioning rules
- Maintain backward compatibility
- Document version changes
- Test compatibility

**Interface Stability:**
- Use @VintfStability
- Follow stability rules
- Document interface evolution
- Maintain compatibility

### VINTF Debugging

#### Common Issues

**Compatibility Failures:**
- Check manifest format
- Verify HAL availability
- Check version compatibility
- Review interface definitions

**Manifest Errors:**
- Validate XML syntax
- Check schema compliance
- Verify element structure
- Review namespace declarations

#### Debugging Tools

**Manifest Inspection:**
```bash
# View device manifest
adb shell cat /vendor/manifest.xml

# View framework manifest
adb shell cat /system/etc/vintf/manifest.xml

# Check compatibility matrix
adb shell cat /vendor/compatibility_matrix.xml
```

**Runtime Checking:**
```bash
# Check VINTF status
adb shell vintf

# Dump VINTF information
adb shell dumpsys vintf
```

### VINTF and System Updates

#### OTA Compatibility

**OTA Updates:**
- VINTF validates compatibility
- Ensures HAL availability
- Checks version compatibility
- Prevents incompatible updates

**Update Process:**
```
1. OTA package includes framework manifest
2. Device has device manifest
3. VINTF validates compatibility
4. Update proceeds if compatible
5. System boots with validated HALs
```

#### GSI Compatibility

**GSI (Generic System Image):**
- Generic framework image
- Works with any vendor
- VINTF ensures compatibility
- Validates vendor HALs

**GSI Process:**
```
1. GSI includes framework manifest
2. Device has device manifest
3. VINTF validates compatibility
4. GSI works if compatible
5. Framework uses vendor HALs
```

## Key Takeaways

1. **VINTF (Vendor Interface Object Tree)** is the comprehensive framework that manages vendor interfaces, validates compatibility, and ensures framework-vendor interoperability.

2. **VINTF includes manifest management** with device manifests (vendor HALs), framework manifests (framework requirements), and compatibility matrices (compatibility rules).

3. **VINTF validates compatibility** by checking HAL availability, version compatibility, and interface correctness, ensuring framework and vendor work together.

4. **VINTF is the foundation of Project Treble**, enabling independent framework and vendor updates through stable interfaces and compatibility validation.

5. **VINTF provides runtime discovery** through VIO (Vendor Interface Object), allowing the framework to query vendor capabilities at runtime.

6. **VTS (Vendor Test Suite)** validates VINTF compliance through automated testing, ensuring HAL implementations meet compatibility requirements.

7. **VINTF manifests** describe both AIDL and HIDL HALs, with device manifests declaring available HALs and framework manifests declaring required HALs.

8. **Understanding VINTF** is essential for AOSP development, Treble compatibility, HAL implementation, and ensuring system stability across framework and vendor updates.

## Related Topics

- **Vendor Interface Object:** Runtime HAL discovery component of VINTF
- **AIDL-based HALs:** Modern HAL implementations that use VINTF
- **Stability annotations:** @VintfStability for VINTF-compatible interfaces
- **VTS (Vendor Test Suite):** Automated testing for VINTF compliance

