---
number: 196
title: repo (manifest management)
slug: repo-manifest-management
level: intermediate
tags:
  - aosp
  - repo
  - manifest
  - version-control
  - build-tools
  - aosp-development
prerequisites:
  - aosp-repo-structure
  - build-system-structure
estimated_minutes: 95
contributors: []
diagrams: []
examples: []
canonical_id: aosp-intermediate-196
---

# repo (manifest management)

## Overview

repo (manifest management) refers to the tool and process for managing multiple Git repositories in AOSP development. repo is a Python tool that wraps Git to manage hundreds of Git repositories that make up the Android Open Source Project. Understanding repo and manifest management is essential for AOSP development, as it explains how to initialize AOSP repositories, how to manage multiple Git repositories, how to work with manifests, how to sync code, and how repo coordinates the AOSP build system. This guide provides a comprehensive overview of repo and manifest management, repo commands, manifest files, repository management, sync operations, and best practices.

Think of repo like a project manager for multiple Git repositories: just as a project manager coordinates multiple teams (repositories) working on different parts of a project, repo coordinates multiple Git repositories that make up AOSP, ensuring they're all at compatible versions and properly organized. The manifest file is like the project plan that specifies which repositories are needed and which versions to use.

## Deep Explanation

### What is repo?

repo is a Python tool that wraps Git to manage multiple Git repositories that make up the Android Open Source Project. repo uses manifest files to specify which repositories to include and which revisions to use.

**Key Characteristics:**
- **Multi-Repository Management:** Manages hundreds of Git repositories
- **Manifest-Based:** Uses manifest files for configuration
- **Git Wrapper:** Wraps Git commands
- **AOSP-Specific:** Designed for AOSP development
- **Version Coordination:** Ensures compatible versions

**Why repo?**
- **Scale:** AOSP has hundreds of repositories
- **Coordination:** Ensures compatible versions
- **Efficiency:** Simplifies multi-repo operations
- **Organization:** Organizes repositories
- **Build System:** Integrates with build system

### repo Commands

#### Basic Commands

**Basic Commands:**
- `repo init` - Initialize repo workspace
- `repo sync` - Sync all repositories
- `repo status` - Show repository status
- `repo branch` - Show branches
- `repo diff` - Show differences

**Command Usage:**
```bash
# Initialize repo workspace
repo init -u https://android.googlesource.com/platform/manifest \
    -b android-14.0.0_r1

# Sync all repositories
repo sync -j8

# Show status
repo status

# Show branches
repo branch

# Show differences
repo diff
```

**Command Characteristics:**
- Workspace initialization
- Repository synchronization
- Status checking
- Branch management
- Difference viewing

#### Advanced Commands

**Advanced Commands:**
- `repo forall` - Execute command in all repos
- `repo start` - Create branch in repos
- `repo upload` - Upload changes for review
- `repo prune` - Remove merged branches
- `repo abandon` - Abandon branch

**Command Usage:**
```bash
# Execute command in all repos
repo forall -c "git status"

# Create branch in all repos
repo start my-feature-branch

# Upload changes for review
repo upload

# Remove merged branches
repo prune

# Abandon branch
repo abandon my-feature-branch
```

**Command Characteristics:**
- Multi-repo operations
- Branch management
- Code review integration
- Branch cleanup
- Repository management

### Manifest Files

#### Manifest Structure

**Manifest Structure:**
- XML format
- Repository definitions
- Revision specifications
- Project organization
- Remote definitions

**Manifest Example:**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<manifest>
    <remote name="aosp"
            fetch="https://android.googlesource.com"
            review="https://android-review.googlesource.com/" />
    
    <default remote="aosp"
             revision="refs/tags/android-14.0.0_r1"
             sync-j="4" />
    
    <project path="build/make" name="platform/build" />
    <project path="frameworks/base" name="platform/frameworks/base" />
    <project path="system/core" name="platform/system/core" />
    
    <include name="device-vendor.xml" />
</manifest>
```

**Structure Characteristics:**
- XML format
- Remote definitions
- Default settings
- Project definitions
- Include support

#### Manifest Elements

**Manifest Elements:**
- `<remote>` - Remote repository definition
- `<default>` - Default settings
- `<project>` - Project/repository definition
- `<include>` - Include other manifests
- `<remove-project>` - Remove project

**Element Definitions:**
```xml
<!-- Remote definition -->
<remote name="aosp"
        fetch="https://android.googlesource.com"
        review="https://android-review.googlesource.com/" />

<!-- Default settings -->
<default remote="aosp"
         revision="refs/tags/android-14.0.0_r1"
         sync-j="4" />

<!-- Project definition -->
<project path="frameworks/base"
         name="platform/frameworks/base"
         revision="refs/tags/android-14.0.0_r1" />

<!-- Include other manifest -->
<include name="device-vendor.xml" />
```

**Element Characteristics:**
- Remote configuration
- Default values
- Project specification
- Manifest inclusion
- Project removal

### Repository Management

#### Workspace Structure

**Workspace Structure:**
```
workspace/
├── .repo/
│   ├── manifest.xml
│   ├── manifests/
│   └── project-objects/
├── build/
├── frameworks/
├── system/
└── ...
```

**Structure Characteristics:**
- `.repo/` directory
- Manifest files
- Project directories
- Organized structure
- Git repositories

#### Repository Operations

**Repository Operations:**
- Initialize workspace
- Sync repositories
- Create branches
- Commit changes
- Upload for review

**Operation Flow:**
```
1. Initialize workspace (repo init)
2. Sync repositories (repo sync)
3. Create branch (repo start)
4. Make changes
5. Commit changes (git commit)
6. Upload for review (repo upload)
```

**Operation Characteristics:**
- Workspace setup
- Code synchronization
- Branch management
- Change management
- Code review

### Sync Operations

#### Sync Process

**Sync Process:**
- Fetch latest changes
- Update repositories
- Checkout specified revisions
- Handle conflicts
- Update workspace

**Sync Example:**
```bash
# Sync all repositories
repo sync

# Sync specific project
repo sync frameworks/base

# Sync with force
repo sync -f

# Sync with current branch only
repo sync -c

# Sync with network only
repo sync -n
```

**Sync Characteristics:**
- Code updates
- Revision checkout
- Conflict handling
- Workspace updates
- Network operations

#### Sync Options

**Sync Options:**
- `-j` - Number of parallel jobs
- `-c` - Current branch only
- `-f` - Force sync
- `-n` - Network only
- `-l` - Local only

**Option Usage:**
```bash
# Parallel sync
repo sync -j8

# Current branch only
repo sync -c

# Force sync
repo sync -f

# Network only
repo sync -n

# Local only
repo sync -l
```

**Option Characteristics:**
- Performance tuning
- Branch filtering
- Force operations
- Network control
- Local operations

### Best Practices

#### Best Practices

**Best Practices:**
- Use appropriate manifest
- Sync regularly
- Create branches for changes
- Test before uploading
- Follow AOSP guidelines

**Practice Guidelines:**
- **Manifest:** Use appropriate manifest
- **Sync:** Sync regularly
- **Branches:** Create branches for changes
- **Testing:** Test before uploading
- **Guidelines:** Follow AOSP guidelines

#### Common Workflows

**Common Workflows:**
- Initial setup
- Daily development
- Feature development
- Bug fixing
- Code review

**Workflow Examples:**
- Setup: repo init, repo sync
- Development: repo start, make changes, commit
- Review: repo upload
- Update: repo sync
- Cleanup: repo prune

## Key Takeaways

1. **repo (manifest management)** refers to the tool and process for managing multiple Git repositories in AOSP development, using manifest files to coordinate hundreds of Git repositories.

2. **repo commands** include basic commands (repo init, repo sync, repo status, repo branch, repo diff), advanced commands (repo forall, repo start, repo upload, repo prune, repo abandon), and command characteristics.

3. **Manifest files** include manifest structure (XML format, repository definitions, revision specifications, project organization, remote definitions), manifest elements (remote, default, project, include, remove-project), and structure characteristics.

4. **Repository management** includes workspace structure (.repo/ directory, manifest files, project directories, organized structure, Git repositories), repository operations (initialize workspace, sync repositories, create branches, commit changes, upload for review), and management characteristics.

5. **Sync operations** include sync process (fetch latest changes, update repositories, checkout specified revisions, handle conflicts, update workspace), sync options (-j parallel jobs, -c current branch only, -f force sync, -n network only, -l local only), and sync characteristics.

6. **Best practices** include best practices (use appropriate manifest, sync regularly, create branches for changes, test before uploading, follow AOSP guidelines), common workflows (initial setup, daily development, feature development, bug fixing, code review), and practice guidelines.

7. **Understanding repo and manifest management** is essential for AOSP development, enabling multi-repository management, version coordination, efficient development workflows, build system integration, and proper AOSP repository management.

## Related Topics

- **AOSP repo structure:** Repository structure details
- **Build system structure:** Build system details

