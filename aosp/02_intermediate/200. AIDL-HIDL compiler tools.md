---
number: 200
title: AIDL/HIDL compiler tools
slug: aidl-hidl-compiler-tools
level: intermediate
tags:
  - aosp
  - aidl
  - hidl
  - compiler
  - code-generation
  - build-tools
  - interface-compilation
prerequisites:
  - aidl
  - aidl-ndk
  - hidl-deprecated-but-still-used
  - aidl-based-hals
estimated_minutes: 95
contributors: []
diagrams: []
examples: []
canonical_id: aosp-intermediate-200
---

# AIDL/HIDL compiler tools

## Overview

AIDL/HIDL compiler tools are build system utilities that compile AIDL and HIDL interface definition files into generated code for Binder IPC. Understanding AIDL/HIDL compiler tools is essential for AOSP development, as it explains how interface code is generated, how to use compiler tools, how generated code works, how to configure compilation, and how these tools integrate with the Android build system. This guide provides a comprehensive overview of AIDL/HIDL compiler tools, compiler usage, code generation, build integration, tool options, and best practices.

Think of AIDL/HIDL compiler tools like code generators: just as you might use a code generator to create boilerplate code from templates, AIDL/HIDL compiler tools generate Binder proxy and stub code from interface definitions, automatically creating the complex IPC code needed for inter-process communication.

## Deep Explanation

### What are AIDL/HIDL Compiler Tools?

AIDL/HIDL compiler tools are build system utilities that compile AIDL and HIDL interface definition files into generated code for Binder IPC, automatically creating proxy and stub classes, marshaling code, and interface implementations.

**Key Characteristics:**
- **Code Generation:** Generate Binder code from interfaces
- **Build Integration:** Integrated with Android build system
- **Automatic:** Automatic code generation during build
- **Type Safety:** Compile-time type checking
- **Multiple Languages:** Support Java, C++, and NDK

**Why AIDL/HIDL Compiler Tools?**
- **Code Generation:** Automate Binder code creation
- **Type Safety:** Ensure type safety
- **Consistency:** Ensure consistent code generation
- **Development:** Simplify development
- **Maintenance:** Reduce manual code maintenance

### AIDL Compiler

#### AIDL Compiler Overview

**AIDL Compiler:**
- Compiles AIDL files to Java/C++ code
- Generates proxy and stub classes
- Creates marshaling code
- Handles type conversion
- Build system integration

**Compiler Location:**
- `frameworks/base/tools/aidl/` in AOSP
- Built during AOSP build
- Available as `aidl` command
- Java-based tool

#### AIDL Compilation Process

**Compilation Process:**
```
1. Parse AIDL file
2. Validate syntax
3. Resolve types
4. Generate Java/C++ code
5. Output generated files
```

**Process Characteristics:**
- File parsing
- Syntax validation
- Type resolution
- Code generation
- Output creation

#### AIDL Compiler Usage

**Command-Line Usage:**
```bash
# Compile AIDL to Java
aidl --lang=java \
    --out=output/java \
    --include=input/aidl \
    input/aidl/com/example/IMyService.aidl

# Compile AIDL to C++
aidl --lang=cpp \
    --out=output/cpp \
    --include=input/aidl \
    input/aidl/com/example/IMyService.aidl

# Compile AIDL to NDK
aidl --lang=ndk \
    --out=output/ndk \
    --include=input/aidl \
    input/aidl/com/example/IMyService.aidl
```

**Command Options:**
- `--lang` - Output language (java, cpp, ndk)
- `--out` - Output directory
- `--include` - Include directories
- `--preprocessed` - Use preprocessed file
- `--structured` - Structured output

**Usage Characteristics:**
- Language selection
- Output configuration
- Include paths
- Preprocessing support
- Structured output

### HIDL Compiler

#### HIDL Compiler Overview

**HIDL Compiler:**
- Compiles HIDL files to C++/Java code
- Generates HAL interfaces
- Creates transport code
- Handles versioning
- Build system integration

**Compiler Location:**
- `system/tools/hidl/` in AOSP
- Built during AOSP build
- Available as `hidl-gen` command
- Python-based tool

**Note:** HIDL is deprecated in favor of AIDL HAL, but still used in some systems.

#### HIDL Compilation Process

**Compilation Process:**
```
1. Parse HIDL file
2. Validate syntax
3. Resolve types
4. Generate C++/Java code
5. Create transport code
6. Output generated files
```

**Process Characteristics:**
- File parsing
- Syntax validation
- Type resolution
- Code generation
- Transport code
- Output creation

#### HIDL Compiler Usage

**Command-Line Usage:**
```bash
# Generate C++ code
hidl-gen -o output/cpp \
    -Lc++-headers \
    -randroid.hardware:hardware/interfaces \
    android.hardware.example@1.0::IExample

# Generate Java code
hidl-gen -o output/java \
    -Ljava \
    -randroid.hardware:hardware/interfaces \
    android.hardware.example@1.0::IExample

# Generate adapter code
hidl-gen -o output/adapter \
    -Lc++-adapter \
    -randroid.hardware:hardware/interfaces \
    android.hardware.example@1.0::IExample
```

**Command Options:**
- `-o` - Output directory
- `-L` - Language (c++-headers, java, c++-adapter, etc.)
- `-r` - Root path for interfaces
- `-p` - Package path
- `-d` - Depfile output

**Usage Characteristics:**
- Language selection
- Output configuration
- Root path specification
- Package path
- Dependency files

### Build System Integration

#### AIDL Build Integration

**Android.bp Integration:**
```python
# AIDL interface definition
aidl_interface {
    name: "android.hardware.example",
    srcs: ["*.aidl"],
    stability: "vintf",
    backend: {
        java: {
            enabled: true,
        },
        cpp: {
            enabled: true,
        },
        ndk: {
            enabled: true,
        },
    },
}
```

**Build Characteristics:**
- Interface definition
- Source files
- Stability annotation
- Backend selection
- Build integration

#### HIDL Build Integration

**Android.bp Integration:**
```python
# HIDL interface definition
hidl_interface {
    name: "android.hardware.example@1.0",
    root: "android.hardware",
    srcs: ["IExample.hal"],
    interfaces: ["android.hardware.example@1.0"],
    gen_java: true,
    gen_java_constants: true,
}
```

**Build Characteristics:**
- Interface definition
- Root specification
- Source files
- Interface dependencies
- Code generation

### Generated Code

#### AIDL Generated Code

**Java Generated Code:**
- Interface class
- Stub class (server-side)
- Proxy class (client-side)
- Parcelable classes
- Helper classes

**C++ Generated Code:**
- Interface header
- Binder classes
- NDK bindings
- Type definitions
- Helper functions

**NDK Generated Code:**
- NDK interface
- Binder NDK classes
- Type-safe bindings
- Error handling
- Memory management

#### HIDL Generated Code

**C++ Generated Code:**
- Interface header
- BnHw classes (server)
- BpHw classes (client)
- Transport code
- Type definitions

**Java Generated Code:**
- Interface classes
- Proxy classes
- Stub classes
- Type definitions
- Helper classes

### Compiler Options

#### AIDL Compiler Options

**AIDL Options:**
- `--lang` - Output language
- `--out` - Output directory
- `--include` - Include paths
- `--preprocessed` - Preprocessed input
- `--structured` - Structured output
- `--version` - AIDL version
- `--api` - API output
- `--checkapi` - API checking

**Option Usage:**
```bash
aidl --lang=java \
    --out=output \
    --include=include1 --include=include2 \
    --version=1 \
    --api=api.txt \
    input.aidl
```

**Option Characteristics:**
- Language selection
- Output control
- Include management
- Version control
- API management

#### HIDL Compiler Options

**HIDL Options:**
- `-o` - Output directory
- `-L` - Language
- `-r` - Root path
- `-p` - Package path
- `-d` - Depfile
- `-R` - Depfile root
- `-t` - Template

**Option Usage:**
```bash
hidl-gen -o output \
    -Lc++-headers \
    -randroid.hardware:hardware/interfaces \
    -p package_path \
    android.hardware.example@1.0::IExample
```

**Option Characteristics:**
- Output control
- Language selection
- Path specification
- Dependency management
- Template support

### Best Practices

#### Best Practices

**Best Practices:**
- Use build system integration
- Follow interface naming conventions
- Document interfaces
- Test generated code
- Maintain compatibility

**Practice Guidelines:**
- **Build System:** Use build system integration
- **Naming:** Follow interface naming conventions
- **Documentation:** Document interfaces
- **Testing:** Test generated code
- **Compatibility:** Maintain compatibility

#### Common Issues

**Common Issues:**
- Compilation errors
- Type mismatches
- Missing dependencies
- Version conflicts
- Generated code issues

**Issue Solutions:**
- Check AIDL/HIDL syntax
- Verify type definitions
- Ensure dependencies present
- Check version compatibility
- Review generated code

## Key Takeaways

1. **AIDL/HIDL compiler tools** are build system utilities that compile AIDL and HIDL interface definition files into generated code for Binder IPC, automatically creating proxy and stub classes, marshaling code, and interface implementations.

2. **AIDL compiler** includes AIDL compiler overview (compiles AIDL files to Java/C++ code, generates proxy and stub classes, creates marshaling code, handles type conversion, build system integration), AIDL compilation process (parse AIDL file, validate syntax, resolve types, generate Java/C++ code, output generated files), AIDL compiler usage (command-line usage, command options, language selection, output configuration, include paths), and compiler characteristics.

3. **HIDL compiler** includes HIDL compiler overview (compiles HIDL files to C++/Java code, generates HAL interfaces, creates transport code, handles versioning, build system integration), HIDL compilation process (parse HIDL file, validate syntax, resolve types, generate C++/Java code, create transport code, output generated files), HIDL compiler usage (command-line usage, command options, language selection, output configuration, root path specification), and compiler characteristics.

4. **Build system integration** includes AIDL build integration (Android.bp integration, interface definition, source files, stability annotation, backend selection), HIDL build integration (Android.bp integration, interface definition, root specification, source files, interface dependencies), and integration characteristics.

5. **Generated code** includes AIDL generated code (Java generated code - interface class, stub class, proxy class, parcelable classes, helper classes; C++ generated code - interface header, binder classes, NDK bindings, type definitions, helper functions; NDK generated code - NDK interface, binder NDK classes, type-safe bindings, error handling, memory management), HIDL generated code (C++ generated code - interface header, BnHw classes, BpHw classes, transport code, type definitions; Java generated code - interface classes, proxy classes, stub classes, type definitions, helper classes), and code characteristics.

6. **Compiler options** include AIDL compiler options (output language, output directory, include paths, preprocessed input, structured output, AIDL version, API output, API checking), HIDL compiler options (output directory, language, root path, package path, depfile, depfile root, template), and option characteristics.

7. **Best practices** include best practices (use build system integration, follow interface naming conventions, document interfaces, test generated code, maintain compatibility), common issues (compilation errors, type mismatches, missing dependencies, version conflicts, generated code issues), and practice guidelines.

8. **Understanding AIDL/HIDL compiler tools** is essential for AOSP development, enabling interface code generation, build system integration, type-safe IPC, development simplification, and proper compiler tool usage.

## Related Topics

- **AIDL:** AIDL details
- **AIDL NDK:** AIDL NDK details
- **HIDL (deprecated but still used):** HIDL details
- **AIDL-based HALs:** AIDL HAL details

