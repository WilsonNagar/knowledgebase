---
number: 9
title: "WiFi & Network Management"
slug: "wifi-network-management"
level: "intermediate"
tags: ["wifi", "networking", "connectivity", "network-management"]
prerequisites: []
estimated_minutes: 45
contributors: []
diagrams: []
examples: []
canonical_id: "android-intermediate-09"
---



# WiFi & Network Management

## Overview

Android provides APIs for managing WiFi connections, scanning networks, and monitoring network connectivity. This guide covers connecting to WiFi networks programmatically, monitoring network state, and handling network changes in your Android applications.

## Deep Explanation

### WiFi Management Use Cases

- IoT device configuration
- Network diagnostics apps
- Enterprise WiFi management
- Offline-first apps with network awareness

### Permissions Required

- `ACCESS_WIFI_STATE`: Read WiFi state
- `CHANGE_WIFI_STATE`: Modify WiFi state
- `ACCESS_FINE_LOCATION`: Required for scanning (Android 9+)

## Real Code Examples

### Scanning WiFi Networks

```kotlin
class WiFiManager(private val context: Context) {
    private val wifiManager = context.applicationContext
        .getSystemService(Context.WIFI_SERVICE) as android.net.wifi.WifiManager
    
    fun scanNetworks(callback: (List<ScanResult>) -> Unit) {
        if (ContextCompat.checkSelfPermission(
                context,
                Manifest.permission.ACCESS_FINE_LOCATION
            ) != PackageManager.PERMISSION_GRANTED
        ) {
            // Request permission
            return
        }
        
        val receiver = object : BroadcastReceiver() {
            override fun onReceive(context: Context, intent: Intent) {
                val success = intent.getBooleanExtra(
                    android.net.wifi.WifiManager.EXTRA_RESULTS_UPDATED,
                    false
                )
                if (success) {
                    val scanResults = wifiManager.scanResults
                    callback(scanResults)
                }
            }
        }
        
        context.registerReceiver(
            receiver,
            IntentFilter(android.net.wifi.WifiManager.SCAN_RESULTS_AVAILABLE_ACTION)
        )
        
        wifiManager.startScan()
    }
    
    fun getAvailableNetworks(): List<ScanResult> {
        return wifiManager.scanResults
    }
}
```

### Connecting to WiFi Network

```kotlin
class WiFiConnector(private val context: Context) {
    private val wifiManager = context.applicationContext
        .getSystemService(Context.WIFI_SERVICE) as android.net.wifi.WifiManager
    
    fun connectToNetwork(ssid: String, password: String) {
        val wifiConfig = WifiConfiguration().apply {
            SSID = "\"$ssid\""
            preSharedKey = "\"$password\""
            allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK)
        }
        
        val networkId = wifiManager.addNetwork(wifiConfig)
        wifiManager.enableNetwork(networkId, true)
        wifiManager.reconnect()
    }
    
    fun getCurrentNetwork(): WifiInfo? {
        return wifiManager.connectionInfo
    }
    
    fun disconnect() {
        wifiManager.disconnect()
    }
}
```

### Monitoring Network Connectivity

```kotlin
class NetworkMonitor(private val context: Context) {
    private val connectivityManager = context.getSystemService(
        Context.CONNECTIVITY_SERVICE
    ) as ConnectivityManager
    
    fun isConnected(): Boolean {
        val network = connectivityManager.activeNetwork ?: return false
        val capabilities = connectivityManager.getNetworkCapabilities(network)
        return capabilities?.hasCapability(
            NetworkCapabilities.NET_CAPABILITY_INTERNET
        ) ?: false
    }
    
    fun isWiFiConnected(): Boolean {
        val network = connectivityManager.activeNetwork ?: return false
        val capabilities = connectivityManager.getNetworkCapabilities(network)
        return capabilities?.hasTransport(NetworkCapabilities.TRANSPORT_WIFI) ?: false
    }
    
    fun observeConnectivity(callback: (Boolean) -> Unit) {
        val request = NetworkRequest.Builder()
            .addCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)
            .build()
        
        val networkCallback = object : ConnectivityManager.NetworkCallback() {
            override fun onAvailable(network: Network) {
                callback(true)
            }
            
            override fun onLost(network: Network) {
                callback(false)
            }
        }
        
        connectivityManager.registerNetworkCallback(request, networkCallback)
    }
}
```

## Common Pitfalls

### Problem: Not requesting location permission for scanning

**BAD:**
```kotlin
// Fails silently on Android 9+
wifiManager.startScan()
```

**GOOD:**
```kotlin
if (hasLocationPermission()) {
    wifiManager.startScan()
} else {
    requestLocationPermission()
}
```

## Quiz

1. What permission is required for WiFi scanning on Android 9+?
   - **A)** ACCESS_WIFI_STATE
   - **B)** CHANGE_WIFI_STATE
   - **C)** ACCESS_FINE_LOCATION
   - **D)** INTERNET

2. How do you monitor network connectivity changes?
   - **A)** Polling
   - **B)** BroadcastReceiver
   - **C)** NetworkCallback
   - **D)** Service

**Answers:**
1. **C** - ACCESS_FINE_LOCATION is required for WiFi scanning on Android 9+
2. **C** - NetworkCallback provides real-time connectivity updates

## Next Steps

- [Socket Connections & Network Communication](./17.%20Socket%20Connections%20%26%20Network%20Communication.md) - Network programming
- [Building Offline-First Apps](../03_advanced/22.%20Building%20Offline-First%20Apps.md) - Network-aware apps

