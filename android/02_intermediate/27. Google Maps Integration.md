---
number: 27
title: "Google Maps Integration"
slug: "google-maps-integration"
level: "intermediate"
tags: ["maps", "location", "google-maps", "geolocation"]
prerequisites: []
estimated_minutes: 50
contributors: []
diagrams: []
examples: []
canonical_id: "android-intermediate-27"
---




# Google Maps Integration

## Overview

Google Maps SDK for Android allows you to add interactive maps, location tracking, and geocoding to your Android applications. This guide covers integrating maps, displaying markers, handling user location, and implementing common map features.

## Deep Explanation

### Maps Components

- **MapView/MapFragment**: Container for displaying maps
- **GoogleMap**: Main map object for controlling map behavior
- **Marker**: Points of interest on the map
- **Polyline/Polygon**: Drawing shapes on maps
- **Camera**: Controlling map view and zoom

## Real Code Examples

### Basic Map Setup

```kotlin
// In layout XML
<fragment
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

// In Activity/Fragment
class MapsActivity : AppCompatActivity(), OnMapReadyCallback {
    private lateinit var map: GoogleMap
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_maps)
        
        val mapFragment = supportFragmentManager
            .findFragmentById(R.id.map) as SupportMapFragment
        mapFragment.getMapAsync(this)
    }
    
    override fun onMapReady(googleMap: GoogleMap) {
        map = googleMap
        
        // Add a marker
        val sydney = LatLng(-34.0, 151.0)
        map.addMarker(MarkerOptions().position(sydney).title("Sydney"))
        map.moveCamera(CameraUpdateFactory.newLatLng(sydney))
    }
}
```

### Adding Markers

```kotlin
// Single marker
val location = LatLng(37.7749, -122.4194)
map.addMarker(
    MarkerOptions()
        .position(location)
        .title("San Francisco")
        .snippet("City by the Bay")
        .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_BLUE))
)

// Multiple markers
val locations = listOf(
    LatLng(37.7749, -122.4194),
    LatLng(40.7128, -74.0060),
    LatLng(34.0522, -118.2437)
)

locations.forEach { location ->
    map.addMarker(MarkerOptions().position(location))
}
```

### Getting User Location

```kotlin
class MapsActivity : AppCompatActivity(), OnMapReadyCallback {
    private lateinit var map: GoogleMap
    private lateinit var fusedLocationClient: FusedLocationProviderClient
    
    override fun onMapReady(googleMap: GoogleMap) {
        map = googleMap
        fusedLocationClient = LocationServices.getFusedLocationProviderClient(this)
        
        getCurrentLocation()
    }
    
    private fun getCurrentLocation() {
        if (ContextCompat.checkSelfPermission(
                this,
                Manifest.permission.ACCESS_FINE_LOCATION
            ) == PackageManager.PERMISSION_GRANTED
        ) {
            fusedLocationClient.lastLocation.addOnSuccessListener { location ->
                location?.let {
                    val userLocation = LatLng(it.latitude, it.longitude)
                    map.addMarker(
                        MarkerOptions()
                            .position(userLocation)
                            .title("My Location")
                    )
                    map.moveCamera(CameraUpdateFactory.newLatLngZoom(userLocation, 15f))
                }
            }
        }
    }
}
```

### Drawing Polylines

```kotlin
val polylineOptions = PolylineOptions()
    .add(LatLng(37.7749, -122.4194))
    .add(LatLng(40.7128, -74.0060))
    .add(LatLng(34.0522, -118.2437))
    .color(Color.BLUE)
    .width(10f)

map.addPolyline(polylineOptions)
```

### Geocoding (Address to Coordinates)

```kotlin
val geocoder = Geocoder(this, Locale.getDefault())
val address = "1600 Amphitheatre Parkway, Mountain View"

geocoder.getFromLocationName(address, 1)?.let { addresses ->
    if (addresses.isNotEmpty()) {
        val location = LatLng(
            addresses[0].latitude,
            addresses[0].longitude
        )
        map.addMarker(MarkerOptions().position(location).title(address))
    }
}
```

## Common Pitfalls

### Problem: Not requesting location permissions

**BAD:**
```kotlin
// Crashes if permission not granted
val location = fusedLocationClient.lastLocation.result
```

**GOOD:**
```kotlin
if (hasLocationPermission()) {
    fusedLocationClient.lastLocation.addOnSuccessListener { location ->
        // Use location
    }
} else {
    requestLocationPermission()
}
```

## Quiz

1. What callback is used when map is ready?
   - **A)** OnMapCreated
   - **B)** OnMapReadyCallback
   - **C)** MapListener
   - **D)** MapCallback

2. How do you add a custom marker icon?
   - **A)** Use MarkerOptions.icon()
   - **B)** Use Marker.setIcon()
   - **C)** Modify marker XML
   - **D)** Can't customize icons

**Answers:**
1. **B** - OnMapReadyCallback is called when map is ready to use
2. **A** - Use MarkerOptions.icon() with BitmapDescriptorFactory

## Next Steps

- [Navigation & Deep Links](./11.%20Navigation%20%26%20Deep%20Links.md) - Navigation patterns

